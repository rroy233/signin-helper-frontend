{"remainingRequest":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/src/components/Admin/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/src/components/Admin/Index.vue","mtime":1643213171879},{"path":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/node_modules/cache-loader/dist/cjs.js","mtime":1630043765451},{"path":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/node_modules/babel-loader/lib/index.js","mtime":1634886029486},{"path":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/node_modules/cache-loader/dist/cjs.js","mtime":1630043765451},{"path":"/Users/Roy/Documents/开发/开发中/signin/Frontend/sign_in/node_modules/vue-loader/lib/index.js","mtime":1631116556383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGJhY2tFbmRVcmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkw7CmltcG9ydCBuUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiJBZG1pbkluZGV4IiwKICAgIGRhdGEoKXsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbm5vdW5jZW1lbnRfcnVsZTpbdiA9PiB2Lmxlbmd0aCA8PSA1MCB8fCAn5a2X5pWw5LiN6IO96LaF6L+HNTAnXSwKICAgICAgICBuYW1lX3J1bGU6W3YgPT4gdi5sZW5ndGggPD0gNDAgfHwgJ+Wtl+aVsOS4jeiDvei2hei/hzQwJ10sCiAgICAgICAgY2hlZXJUZXh0X3J1bGU6W3YgPT4gdi5sZW5ndGggPD0gMjAgfHwgJ+Wtl+aVsOS4jeiDvei2hei/hzIwJ10sCiAgICAgIGRpYWxvZzp7CiAgICAgICAgICBvcGVuOmZhbHNlLAogICAgICAgICAgdGl0bGU6JycsCiAgICAgICAgICB0ZXh0OicnCiAgICAgIH0sCiAgICAgIGFjdF9saXN0OnsKICAgICAgICBhY3RpdmVfbnVtOjAsCiAgICAgICAgYWN0aXZlX2xpc3Q6W10sCiAgICAgICAgaGlzdG9yeV9saXN0OltdLAogICAgICB9LAogICAgICBjbGFzc19pbmZvOnsKICAgICAgICAgIGNsYXNzX25hbWU6IiIsCiAgICAgICAgICBjbGFzc19jb2RlOiIiLAogICAgICAgICAgdG90YWw6MCwKICAgICAgICAgIGFjdF9pZDoiIiwKICAgICAgICAgIGFjdF9uYW1lOicnCiAgICAgIH0sCiAgICAgIGNsYXNzX2VkaXQ6ewogICAgICAgICAgY2xhc3NfbmFtZToiIiwKICAgICAgICAgIGNsYXNzX2NvZGU6IiIsCiAgICAgIH0sCiAgICAgIGFjdF9kaWFsb2c6ZmFsc2UsCiAgICAgIGVkaXRDbGFzc0RpYWxvZzpmYWxzZSwKICAgICAgYWN0X2xpc3RfZGlhbG9nOmZhbHNlLAogICAgICBsb2FkaW5nX2RpYWxvZzpmYWxzZSwKICAgICAgc3RzX2RpYWxvZzpmYWxzZSwKICAgICAgdXNlcl9kaWFsb2c6ZmFsc2UsCiAgICAgIGVkaXRVc2VyRGlhbG9nOmZhbHNlLAogICAgICBkaWFsb2dEZWxldGU6ewogICAgICAgICAgaXRlbTpudWxsLAogICAgICAgICAgb3BlbjpmYWxzZQogICAgICB9LAogICAgICBhY3RfbGlzdF90YWI6MCwKICAgICAgYWN0X2luZm86ewogICAgICAgICAgbmFtZToiIiwKICAgICAgICAgIGFjdGl2ZTpmYWxzZSwKICAgICAgICAgIGRhaWx5X25vdGlmeTp0cnVlLAogICAgICAgICAgcGljOiIiLAogICAgICAgICAgYW5ub3VuY2VtZW50OiIiLAogICAgICAgICAgY2hlZXJfdGV4dDoiIiwKICAgICAgICAgIGVuZF90aW1lOnsKICAgICAgICAgICAgICBkOiIiLAogICAgICAgICAgICAgIHQ6IiIsCiAgICAgICAgICB9LAogICAgICAgICAgdXBsb2FkOnsKICAgICAgICAgICAgZW5hYmxlZDpmYWxzZSwKICAgICAgICAgICAgdHlwZTpbXSwKICAgICAgICAgICAgbWF4X3NpemU6NSwKICAgICAgICAgICAgcmVuYW1lOnRydWUKICAgICAgICAgIH0sCiAgICAgIH0sICAgIAogICAgICBzdHM6ewogICAgICAgIGRvbmU6MCwKICAgICAgICB0b3RhbDowLAogICAgICAgIHVuZmluaXNoZWRfbGlzdDpbXSwKICAgICAgICBmaW5pc2hlZF9saXN0OltdLAogICAgICB9LAogICAgICBhY3RfZWRpdF9tb2RlOiJlZGl0IiwKICAgICAgZGF0ZV90aW1lX21lbnU6ewogICAgICAgIGJlZ2luX2RhdGVfbWVudTogZmFsc2UsCiAgICAgICAgYmVnaW5fdGltZV9tZW51OmZhbHNlLAogICAgICAgIGVuZF9kYXRlX21lbnU6IGZhbHNlLAogICAgICAgIGVuZF90aW1lX21lbnU6ZmFsc2UKICAgICAgICB9LAogICAgICAgIGNzcmZIZWFkZXI6e30sCiAgICAgICAgdXNlcl9saXN0OltdLAogICAgICAgIHVzZXJsaXN0X3NlYXJjaDonJywKICAgICAgICB1c2VybGlzdF9oZWFkZXJzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHQ6ICdJRCcsCiAgICAgICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICAgIH0sCiAgICAgICAgICB7IHRleHQ6ICflp5PlkI0nLCB2YWx1ZTogJ25hbWUnIH0sCiAgICAgICAgICB7IHRleHQ6ICfmmK/lkKbkuLrnrqHnkIblkZgnLCB2YWx1ZTogJ2lzX2FkbWluJyxzb3J0YWJsZTogZmFsc2UsfSwKICAgICAgICAgIHsgdGV4dDogJ+aTjeS9nCcsIHZhbHVlOiAnYWN0aW9ucycsc29ydGFibGU6IGZhbHNlLH0sCiAgICAgICAgXSwKICAgICAgICBleHBvcnRfZGF0YTp7CiAgICAgICAgICAgIGFjdF9pZDowLAogICAgICAgICAgICBsb2FkaW5nOmZhbHNlLAogICAgICAgICAgICB1cmw6IiIKICAgICAgICB9LAogICAgICAgIHVwbG9hZF9wcmV2aWV3OnsKICAgICAgICAgIG9wZW46ZmFsc2UsCiAgICAgICAgICBpdGVtOm51bGwsCiAgICAgICAgfSwKICAgICAgICBnZXRfcmRfcGljX2J0bl9sb2FkaW5nOmZhbHNlLAogICAgICB9CiAgICB9LAogICAgbW91bnRlZDpmdW5jdGlvbigpewogICAgICAgIC8v6I635Y+WY3NyZi10b2tlbgogICAgICAgIGlmICh0aGlzLiRjb29raWVzLmdldCgiQ1NSRi1UT0tFTiIpPT1udWxsKXsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiIvZXJyb3IvY3NyZi10b2tlbuiOt+WPluWksei0pe+8jOivt+aNouS4qua1j+iniOWZqOeZu+W9lSJ9KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLmNzcmZIZWFkZXIgPSB7IlgtQ1NSRi1UT0tFTiI6dGhpcy4kY29va2llcy5nZXQoIkNTUkYtVE9LRU4iKX0KICAgICAgICB9CgogICAgICAgIC8v6I635Y+W54+t57qn5L+h5oGvCiAgICAgICAgdGhpcy5pbml0Q2xhc3MoKQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGluaXRDbGFzczpmdW5jdGlvbigpewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgIHVybDogYmFja0VuZFVybCsiL2FwaS9hZG1pbi9jbGFzcy9pbmZvIiwKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLmNsYXNzX2luZm8gPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ2V0X3JhbmRvbV9waWM6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICB0aGlzLmdldF9yZF9waWNfYnRuX2xvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgIHVybDogYmFja0VuZFVybCsiL2FwaS9hZG1pbi9hY3QvZ2V0UmFuZG9tUGljIiwKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdF9pbmZvLnBpYyA9IHJlcy5kYXRhLmRhdGEudXJsCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5nZXRfcmRfcGljX2J0bl9sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpCiAgICAgICAgICAgICAgICBfdGhpcy5nZXRfcmRfcGljX2J0bl9sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGVkaXRfYWN0OmZ1bmN0aW9uKGFjdF9pdGVtKXsKICAgICAgICAgICAgLy/ojrflj5bopoHnvJbovpHnmoTmtLvliqjkv6Hmga8KICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICB0aGlzLmF4aW9zKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICB1cmw6IGJhY2tFbmRVcmwrIi9hcGkvYWRtaW4vYWN0L2luZm8iLAogICAgICAgICAgICAgICAgcGFyYW1zOnsKICAgICAgICAgICAgICAgICAgICBhY3RfaWQ6YWN0X2l0ZW0uYWN0X2lkLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0X2luZm8gPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0X2RpYWxvZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY3RfZWRpdF9tb2RlID0gImVkaXQiCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgbmV3X2FjdDpmdW5jdGlvbigpewogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLm5hbWUgPSAiIgogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLmFjdGl2ZSA9IHRydWUKICAgICAgICAgICAgdGhpcy5hY3RfaW5mby5kYWlseV9ub3RpZnkgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuYWN0X2luZm8uYW5ub3VuY2VtZW50ID0gIiIKICAgICAgICAgICAgdGhpcy5hY3RfaW5mby5waWMgPSAiIgogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLmNoZWVyX3RleHQgPSAi5oGt5Zac5a6M5oiQIgogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLmVuZF90aW1lLmQgPSAiIgogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLmVuZF90aW1lLnQgPSAiIgogICAgICAgICAgICB0aGlzLmFjdF9pbmZvLnVwbG9hZC5lbmFibGVkID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5hY3RfaW5mby51cGxvYWQubWF4X3NpemUgPSA1CiAgICAgICAgICAgIHRoaXMuYWN0X2luZm8udXBsb2FkLnJlbmFtZSA9IHRydWUKICAgICAgICAgICAgdGhpcy5hY3RfaW5mby51cGxvYWQudHlwZSA9IFtdCgogICAgICAgICAgICB0aGlzLmFjdF9kaWFsb2cgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuYWN0X2VkaXRfbW9kZSA9ICJuZXciCiAgICAgICAgICAgIHRoaXMuZ2V0X3JhbmRvbV9waWMoKQogICAgICAgIH0sCiAgICAgICAgZWRpdF9jbGFzczpmdW5jdGlvbigpewogICAgICAgICAgICB0aGlzLmVkaXRDbGFzc0RpYWxvZyA9IHRydWUKICAgICAgICAgICAgdGhpcy5jbGFzc19lZGl0LmNsYXNzX25hbWUgPSB0aGlzLmNsYXNzX2luZm8uY2xhc3NfbmFtZQogICAgICAgICAgICB0aGlzLmNsYXNzX2VkaXQuY2xhc3NfY29kZSA9IHRoaXMuY2xhc3NfaW5mby5jbGFzc19jb2RlCiAgICAgICAgfSwKICAgICAgICBzaG93X2FjdF9saXN0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgdGhpcy5sb2FkaW5nX2RpYWxvZyA9IHRydWUKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICAgICAgdXJsOiBiYWNrRW5kVXJsKyIvYXBpL2FkbWluL2FjdC9saXN0IiwKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLmFjdF9saXN0ID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmdfZGlhbG9nID0gZmFsc2UKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICAgICAgX3RoaXMuYWN0X2xpc3RfZGlhbG9nID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgc2F2ZV9jbGFzczpmdW5jdGlvbigpewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6IGJhY2tFbmRVcmwrIi9hcGkvYWRtaW4vY2xhc3MvZWRpdCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOl90aGlzLmNzcmZIZWFkZXIsCiAgICAgICAgICAgICAgICBkYXRhOl90aGlzLmNsYXNzX2VkaXQKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLnN1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWRpdENsYXNzRGlhbG9nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0Q2xhc3MoKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNhdmVfYWN0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIG5Qcm9ncmVzcy5zdGFydCgpCiAgICAgICAgICAgIGxldCBhcGlVcmwgPSAiIgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgIGlmICh0aGlzLmFjdF9lZGl0X21vZGUgPT0gIm5ldyIpewogICAgICAgICAgICAgICAgYXBpVXJsID0gIi9hcGkvYWRtaW4vYWN0L25ldyIKICAgICAgICAgICAgfWVsc2UgaWYgKHRoaXMuYWN0X2VkaXRfbW9kZSA9PSAiZWRpdCIpewogICAgICAgICAgICAgICAgYXBpVXJsID0gIi9hcGkvYWRtaW4vYWN0L2VkaXQiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6IGJhY2tFbmRVcmwrYXBpVXJsLAogICAgICAgICAgICAgICAgaGVhZGVyczpfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgICAgICAgICAgZGF0YTpfdGhpcy5hY3RfaW5mbwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIikKICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY3RfZGlhbG9nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaG93X2FjdF9saXN0KCkKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5Qcm9ncmVzcy5kb25lKCkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcikKICAgICAgICAgICAgICAgIG5Qcm9ncmVzcy5kb25lKCkKICAgICAgICAgICAgfSkKCiAgICAgICAgfSwKICAgICAgICBnZXRfc3RzOmZ1bmN0aW9uKGluZm9faXRlbSl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgLy/ojrflj5bnu5/orqHmlbDmja4KICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICAgICAgdXJsOiBiYWNrRW5kVXJsKycvYXBpL2FkbWluL2FjdC9zdGF0aXN0aWMnLAogICAgICAgICAgICAgICAgcGFyYW1zOnsKICAgICAgICAgICAgICAgICAgICBhY3RfaWQ6aW5mb19pdGVtLmFjdF9pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIC8vIOWkhOeQhuaIkOWKn+aDheWGtQogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHMuZG9uZSA9IHJlcy5kYXRhLmRhdGEuZG9uZQogICAgICAgICAgICAgICAgICAgIF90aGlzLnN0cy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWwKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHMudW5maW5pc2hlZF9saXN0ID0gcmVzLmRhdGEuZGF0YS51bmZpbmlzaGVkX2xpc3QKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHMuZmluaXNoZWRfbGlzdCA9IHJlcy5kYXRhLmRhdGEuZmluaXNoZWRfbGlzdAoKICAgICAgICAgICAgICAgICAgICBpZihpbmZvX2l0ZW0udHlwZSA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwb3J0X2RhdGEuYWN0X2lkID0gaW5mb19pdGVtLmFjdF9pZAogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBvcnRfZGF0YS5hY3RfaWQgPSAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cG9ydF9kYXRhLnVybCA9ICIiCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RzX2RpYWxvZyA9IHRydWUKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNob3dfdXNlcl9saXN0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgLy/ojrflj5bnlKjmiLcKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICAgICAgdXJsOiBiYWNrRW5kVXJsKycvYXBpL2FkbWluL3VzZXIvbGlzdCcsCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgLy8g5aSE55CG5oiQ5Yqf5oOF5Ya1CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJfbGlzdCA9IHJlcy5kYXRhLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJfZGlhbG9nID0gdHJ1ZQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBnZXRfdXNlcl9saXN0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgLy/ojrflj5bnlKjmiLcKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICAgICAgdXJsOiBiYWNrRW5kVXJsKycvYXBpL2FkbWluL3VzZXIvbGlzdCcsCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgLy8g5aSE55CG5oiQ5Yqf5oOF5Ya1CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJfbGlzdCA9IHJlcy5kYXRhLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBvcF91c2VyOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6IGJhY2tFbmRVcmwrIi9hcGkvYWRtaW4vdXNlci9kZWwiLAogICAgICAgICAgICAgICAgaGVhZGVyczpfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgICAgICAgICAgZGF0YTp7CiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDpfdGhpcy5kaWFsb2dEZWxldGUuaXRlbS51c2VyX2lkLAogICAgICAgICAgICAgICAgICAgIHNpZ246X3RoaXMuZGlhbG9nRGVsZXRlLml0ZW0uc2lnbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dEZWxldGUub3Blbj1mYWxzZQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpCiAgICAgICAgICAgIH0pCgogICAgICAgIH0sCiAgICAgICAgc2V0X2FkbWluOmZ1bmN0aW9uKGl0ZW0sc2V0X3RvKXsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgIHVybDogYmFja0VuZFVybCsiL2FwaS9hZG1pbi91c2VyL3NldEFkbWluIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6X3RoaXMuY3NyZkhlYWRlciwKICAgICAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6aXRlbS51c2VyX2lkLAogICAgICAgICAgICAgICAgICAgIHNldF90bzpzZXRfdG8sCiAgICAgICAgICAgICAgICAgICAgc2lnbjppdGVtLnNpZ24KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdWNjZXNzKCLmk43kvZzmiJDlip8iKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nRGVsZXRlLm9wZW49ZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAvLyDlpITnkIbplJnor6/mg4XlhrUKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKQogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgIGNvbmZpcm5fZGVsZXRlOmZ1bmN0aW9uKGl0ZW0pewogICAgICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZS5pdGVtID0gaXRlbQogICAgICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZS5vcGVuID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgZXhwb3J0X2ZpbGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICB0aGlzLmV4cG9ydF9kYXRhLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6IGJhY2tFbmRVcmwrIi9hcGkvYWRtaW4vYWN0L2V4cG9ydCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOl90aGlzLmNzcmZIZWFkZXIsCiAgICAgICAgICAgICAgICBkYXRhOnsKICAgICAgICAgICAgICAgICAgICBhY3RfaWQ6X3RoaXMuZXhwb3J0X2RhdGEuYWN0X2lkLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApewogICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cG9ydF9kYXRhLnVybCA9IHJlcy5kYXRhLmRhdGEuZG93bmxvYWRfdXJsCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5leHBvcnRfZGF0YS5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAvLyDlpITnkIbplJnor6/mg4XlhrUKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ2V0X2ZpbGVfcHJldmlldzpmdW5jdGlvbihzdHNfaXRlbSl7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgIHVybDogYmFja0VuZFVybCsiL2FwaS9hZG1pbi9hY3Qvdmlld0ZpbGUiLAogICAgICAgICAgICAgICAgaGVhZGVyczpfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgICAgICAgICAgZGF0YTp7CiAgICAgICAgICAgICAgICAgICAgYWN0X2lkOl90aGlzLmV4cG9ydF9kYXRhLmFjdF9pZCwKICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOnN0c19pdGVtLnVzZXJfaWQsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkX3ByZXZpZXcuaXRlbSA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRfcHJldmlldy5vcGVuID0gdHJ1ZQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHRleHQpewogICAgICAgICAgICB0aGlzLmRpYWxvZy5vcGVuID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmRpYWxvZy50aXRsZSA9ICfmiJDlip8nCiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnRleHQgPSB0ZXh0CiAgICAgICAgfSwKICAgICAgICBlcnJvcjpmdW5jdGlvbih0ZXh0KXsKICAgICAgICAgICAgdGhpcy5kaWFsb2cub3BlbiA9IHRydWUKICAgICAgICAgICAgdGhpcy5kaWFsb2cudGl0bGUgPSAn5aSx6LSlJwogICAgICAgICAgICB0aGlzLmRpYWxvZy50ZXh0ID0gdGV4dAogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIGltZ19wcmV2aWV3OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmICh0aGlzLmFjdF9pbmZvLnBpYyA9PSAiIil7CiAgICAgICAgICAgICAgICByZXR1cm4gIi9zdGF0aWMvaW1hZ2UvZGVmYXVsdC5qcGciCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0X2luZm8ucGljCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAp9Cg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAm0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/Admin","sourcesContent":["<template>\n  <div>\n      <v-app id=\"inspire\">\n    <v-app-bar app>\n      <v-toolbar-title>管理员面板</v-toolbar-title>\n    </v-app-bar>\n\n    <v-main>\n      \n      <v-container>\n        <!--  -->\n        <v-alert\n        class=\"ma-2\"\n        text\n        color=\"info\"\n        >\n        <h3 class=\"text-h5\">\n            管理员您好\n        </h3>\n        <div>如果遇到什么问题可以联系QQ:2867984618</div>\n        <div>系统现已支持多任务并行，您可以在发布多个签到活动了。</div>\n\n        <v-divider\n            class=\"my-4 info\"\n            style=\"opacity: 0.22\"\n        ></v-divider>\n\n        <div class=\"v-text-body-1\">\n            您当前所管理的班级名称为<code>{{class_info.class_name}}</code>,一共有<code>{{class_info.total}}</code>名同学已加入班级。\n            新同学可以使用班级代码<code>{{class_info.class_code}}</code>加入。\n        </div>\n        </v-alert>\n\n        <!-- 菜单开始 -->\n        <v-list-item-group color=\"primary\" class=\"ma-2\">\n\n            \n            <v-list-item @click=\"edit_class\" link>\n                <v-list-item-icon>\n                  <v-icon>mdi-google-classroom</v-icon>\n                </v-list-item-icon>\n                <v-list-item-content>\n                  <v-list-item-title>修改班级信息</v-list-item-title>\n                </v-list-item-content>\n            </v-list-item>\n\n              <v-list-item @click=\"show_act_list\" link>\n                <v-list-item-icon>\n                  <v-icon>mdi-calendar-search</v-icon>\n                </v-list-item-icon>\n                <v-list-item-content>\n                  <v-list-item-title>活动管理</v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n\n              <v-list-item @click=\"show_user_list\" link>\n                <v-list-item-icon>\n                  <v-icon>mdi-account-cog-outline</v-icon>\n                </v-list-item-icon>\n                <v-list-item-content>\n                  <v-list-item-title>班级成员管理</v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n\n              \n\n              <v-divider></v-divider>\n\n              <v-list-item to=\"/user\" link>\n                <v-list-item-icon>\n                  <v-icon>mdi-keyboard-return</v-icon>\n                </v-list-item-icon>\n                <v-list-item-content>\n                  <v-list-item-title>返回用户端</v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n    \n          </v-list-item-group>\n          <!-- 菜单结束 -->\n\n\n      </v-container>\n\n\n      <!-- 提示框 -->\n      <v-dialog v-model=\"dialog.open\" max-width=\"450px\">\n        <v-card>\n          <v-card-title>{{dialog.title}}</v-card-title>\n          <v-card-text>\n              {{dialog.text}}\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" text @click=\"dialog.open=!dialog.open\">OK</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n      <!-- 编辑班级信息 -->\n        <v-dialog v-model=\"editClassDialog\" max-width=\"450px\">\n            <v-card>\n            <v-card-title>编辑班级信息</v-card-title>\n            <v-card-text>\n                <v-text-field\n                    label=\"班级名称\"\n                    v-model=\"class_edit.class_name\"\n                    outlined\n                ></v-text-field>\n                <v-text-field\n                    label=\"班级代码\"\n                    v-model=\"class_edit.class_code\"\n                    outlined\n                ></v-text-field>\n            </v-card-text>\n            <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"editClassDialog=!editClassDialog\">取消</v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"save_class\">保存</v-btn>\n            </v-card-actions>\n            </v-card>\n        </v-dialog>\n\n        <!-- 加载框 -->\n      <v-dialog\n        v-model=\"loading_dialog\"\n        hide-overlay\n        persistent\n        width=\"300\"\n        >\n        <v-card\n            color=\"white\"\n            dark\n        >\n            <v-card-text class=\"mt-1 primary--text\">\n            加载中\n            <v-progress-linear\n                indeterminate\n                color=\"primary\"\n                class=\"mb-0\"\n            ></v-progress-linear>\n            </v-card-text>\n        </v-card>\n        </v-dialog>\n\n\n        <!-- 活动列表 -->\n        <v-dialog v-model=\"act_list_dialog\" fullscreen hide-overlay transition=\"dialog-bottom-transition\">\n            <v-card>\n                <v-toolbar\n                  color=\"cyan\"\n                  dark\n                  flat\n                >\n                <v-btn icon dark @click=\"act_list_dialog = false\">\n                    <v-icon>mdi-close</v-icon>\n                </v-btn>\n                  <v-toolbar-title>活动管理</v-toolbar-title>\n                  <v-spacer></v-spacer>\n                  <v-btn depressed color=\"cyan darken-2\" @click=\"new_act\">\n                    新建活动\n                  </v-btn>\n                  <template v-slot:extension>\n                    <v-tabs v-model=\"act_list_tab\" align-with-title>\n                      <v-tabs-slider color=\"yellow\"></v-tabs-slider>\n                      <v-tab>\n                        <v-badge color=\"pink\" dot v-if=\"act_list.active_num!=0\">\n                            当前活动\n                        </v-badge>\n                        {{act_list.active_num==0?'当前活动':''}}\n                      </v-tab>\n                      <v-tab>\n                        历史活动\n                      </v-tab>\n                      <v-tab-item>\n                        <v-card>\n                        <v-container>\n                            <!-- 当前活动 -->\n                            <v-list three-line>\n                                <template v-for=\"(item, index) in act_list.active_list\">\n                                  <v-list-item :key=\"index\">\n                                    <v-list-item-avatar>\n                                      <v-icon>mdi-calendar-cursor</v-icon>\n                                    </v-list-item-avatar>\n                                    <v-list-item-content>\n                                      <v-list-item-title >{{item.name}}</v-list-item-title>\n                                      <v-list-item-subtitle >创建时间{{item.begin_time}}</v-list-item-subtitle>\n                                      <v-list-item-subtitle >截止时间{{item.end_time}}</v-list-item-subtitle>\n                                    </v-list-item-content>\n                                    <v-list-item-action>\n                                      <v-btn depressed @click=\"edit_act(item)\">\n                                        编辑\n                                      </v-btn>\n                                    </v-list-item-action>\n                                    <v-list-item-action>\n                                        <v-btn depressed @click=\"get_sts(item)\">\n                                          数据\n                                          <v-icon v-if=\"item.type==1\" small right>mdi-cloud-check-outline</v-icon>\n                                        </v-btn>\n                                        <v-list-item-action-text class=\"text-center\">创建人:{{item.create_by}}</v-list-item-action-text>\n                                      </v-list-item-action>\n                                  </v-list-item>\n                                </template>\n                            </v-list>\n                            <!-- 当前活动 -->\n                        </v-container>\n                        </v-card>\n                      </v-tab-item>\n                      <v-tab-item>\n                        <v-card>\n                            <!-- 历史活动 -->\n                            <v-list three-line>\n                                <template v-for=\"(item, index) in act_list.history_list\">\n                                  <v-list-item :key=\"index\">\n                                    <v-list-item-avatar>\n                                      <v-icon>mdi-calendar-lock</v-icon>\n                                    </v-list-item-avatar>\n                                    <v-list-item-content>\n                                      <v-list-item-title v-html=\"item.name\"></v-list-item-title>\n                                      <v-list-item-subtitle >创建时间{{item.begin_time}}</v-list-item-subtitle>\n                                      <v-list-item-subtitle >截止时间{{item.end_time}}</v-list-item-subtitle>\n                                    </v-list-item-content>\n                                    <v-list-item-action>\n                                      <v-btn depressed @click=\"edit_act(item)\">\n                                        编辑\n                                      </v-btn>\n                                    </v-list-item-action>\n                                    <v-list-item-action>\n                                        <v-btn depressed @click=\"get_sts(item)\">\n                                          数据\n                                          <v-icon v-if=\"item.type==1\" small right>mdi-cloud-check-outline</v-icon>\n                                        </v-btn>\n                                        <v-list-item-action-text class=\"text-center\">创建人:{{item.create_by}}</v-list-item-action-text>\n                                    </v-list-item-action>\n                                  </v-list-item>\n                                </template>\n                            </v-list>\n                            <!-- 历史活动 -->\n                        </v-card>\n                      </v-tab-item>\n                    </v-tabs>\n                  </template>\n                </v-toolbar>\n            </v-card>\n        </v-dialog>\n\n\n        <!-- 编辑活动信息 -->\n        <v-dialog\n            v-model=\"act_dialog\"\n            fullscreen\n            hide-overlay\n            transition=\"dialog-bottom-transition\"\n        >\n        <v-card>\n            <v-toolbar\n            dark\n            color=\"primary\"\n            >\n            <v-btn\n                icon\n                dark\n                @click=\"act_dialog = false\"\n            >\n                <v-icon>mdi-close</v-icon>\n            </v-btn>\n            <v-toolbar-title>{{act_edit_mode == \"new\"?\"🌟新建活动\":\"📝编辑当前活动\"}}</v-toolbar-title>\n            <v-spacer></v-spacer>\n            \n            <v-toolbar-items>\n            <v-btn\n            dark\n            text\n            @click=\"save_act\"\n            >\n            保存\n            </v-btn>\n            </v-toolbar-items>\n            </v-toolbar>\n            \n            <!-- 编辑区开始 -->\n            <v-container>\n                <v-alert\n                    dense\n                    type=\"info\"\n                    icon=\"mdi-folder-plus-outline\"\n                    v-if=\"act_edit_mode=='new'\"\n                    class=\"mt-2 mb-4\"\n                >\n                请正确填写结束日期，活动状态会在到期后自动变更。\n                <br>\n                建议管理员为每一个活动都选择不同的配图，便于区分。\n                <br>\n                保存之后，活动即开始，系统将向班级内每一位同学发送通知。\n                </v-alert>\n                <v-alert\n                dense\n                color=\"#2A3B4D\"\n                dark\n                icon=\"mdi-calendar-edit\"\n                v-if=\"act_edit_mode=='edit'\"\n                class=\"mt-2 mb-4\"\n                >\n                若您提前关闭此活动，我们将自动为您设置结束时间。\n                </v-alert>\n\n                <v-text-field\n                    label=\"活动名称\"\n                    v-model=\"act_info.name\"\n                    :rules=\"name_rule\"\n                    hint=\"建议不要与过去的重复，可以是:第x周xxxx\"\n                    outlined\n                ></v-text-field>\n\n                <v-switch\n                v-model=\"act_info.active\"\n                v-if=\"act_edit_mode=='edit'\"\n                inset\n                label=\"是否启用活动\"\n                class=\"my-0\"\n                ></v-switch>\n\n                <v-switch\n                v-model=\"act_info.daily_notify\"\n                inset\n                label=\"是否启用每日提醒\"\n                class=\"my-0\"\n                ></v-switch>\n                \n                <v-textarea\n                    label=\"活动公告\"\n                    v-model=\"act_info.announcement\"\n                    :rules=\"announcement_rule\"\n                    outlined\n                ></v-textarea>\n\n                <v-text-field\n                    label=\"完成签到提示语\"\n                    v-model=\"act_info.cheer_text\"\n                    :rules=\"cheerText_rule\"\n                    outlined\n                ></v-text-field>\n\n                <div class=\"text-overline\">头图设置</div>\n                <div class=\"text-body-1 mb-3\">\n                    我们允许您个性化设置签到卡片的背景图片，如果您要使用默认图片的话，下方输入框请 <code>留空</code>。\n                    <br>\n                    如果需要自定义图片，请前往<a href=\"https://sm.ms\" target=\"_blank\">SM.MS</a>上传图片，在下方填入图片的地址。\n                    <br>\n                    使用「随机图片」功能系统将从Pixiv随机抓取图片，下方将自动填入\"预览地址\"，保存活动后图片地址将转为\"永久地址\"，图片有效期90天。\n                </div>\n                \n                <div class=\"d-flex flex-wrap\">\n                    <v-text-field\n                        label=\"头图地址\"\n                        v-model=\"act_info.pic\"\n                        outlined\n                    ></v-text-field>\n                    <v-btn depressed large :loading=\"get_rd_pic_btn_loading\" @click=\"get_random_pic\" class=\"ma-3\">随机图片</v-btn>\n                </div>\n\n\n                <!-- 预览 -->\n                <v-container>\n                    <v-card\n                    class=\"mx-auto\"\n                    max-width=\"450\"\n                    >\n                    <v-img\n                        class=\"white--text align-end\"\n                        height=\"200px\"\n                        :src=\"img_preview\"\n                        gradient=\"to top right, rgba(0,0,0,.7), rgba(240,255,255,.3)\"\n                    >\n                        <v-card-title class=\"font-weight-black\">\n                            {{act_info.name}}\n                          </v-card-title>\n                          <v-card-subtitle class=\"text-caption\">\n                            还有xxx等x名同学未完成\n                          </v-card-subtitle>\n                    </v-img>\n                \n                    <v-card-subtitle class=\"pb-0\">\n                        预览卡片\n                    </v-card-subtitle>\n                \n                    <v-card-text class=\"text--primary pt-5\">\n                        <div>{{act_info.announcement}}</div>\n                    </v-card-text>\n                \n                    <v-card-actions>\n                        <v-btn\n                        color=\"orange\"\n                        large\n                        text\n                        >\n                        签到\n                        <v-icon\n                            right\n                            dark\n                            v-if=\"act_info.upload.enabled\"\n                        >\n                            mdi-cloud-upload\n                        </v-icon>\n                        </v-btn>\n                        <v-btn\n                        color=\"primary\"\n                        large\n                        text\n                        >\n                        完成情况\n                        </v-btn>\n                    </v-card-actions>\n                    </v-card>\n                </v-container>\n                <!-- 预览结束 -->\n\n                <!-- 上传设置 -->\n                <v-card v-if=\"act_edit_mode=='new'\" class=\"my-3\">\n                    <v-card-title>文件上传设置</v-card-title>\n                    <v-card-subtitle>\n                        系统默认会将用户上传的文件名改为用户的姓名，如果需要保留原文件名，请关闭“上传后重新命名”开关。\n                        <br>\n                        用户上传的文件将在服务器存储30天，过期删除，请管理员及时导出。\n                        <br>\n                        活动一旦发布将无法更改下列设置!\n                    </v-card-subtitle>\n                    <v-card-text>\n                        <v-switch\n                        v-model=\"act_info.upload.enabled\"\n                        inset\n                        label=\"是否需要上传文件\"\n                        ></v-switch>\n                    </v-card-text>\n                    <v-card-text v-if=\"act_info.upload.enabled\">\n                        <div class=\"text-subtitle-2\">文件类型(可多选)：</div>\n                        <v-row>\n                        <v-col\n                            cols=\"12\"\n                            class=\"d-flex justify-start flex-wrap\"\n                        >\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"图片文件(png,jpg)\"\n                            value=\"image\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"压缩包(zip,rar)\"\n                            value=\"archive\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"Word文档(doc,docx)\"\n                            value=\"word\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"PowerPoint演示文档(ppt,pptx)\"\n                            value=\"ppt\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"Excel表格(xls,xlsx)\"\n                            value=\"excel\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                            <v-checkbox\n                            v-model=\"act_info.upload.type\"\n                            label=\"PDF文档(pdf)\"\n                            value=\"pdf\"\n                            class=\"ma-2\"\n                            ></v-checkbox>\n                        </v-col>\n                        </v-row>\n                        \n                        <v-slider\n                        v-model=\"act_info.upload.max_size\"\n                        label=\"文件大小不超过(MB)\"\n                        thumb-color=\"green lighten-1\"\n                        thumb-label=\"always\"\n                        max=\"100\"\n                        min=\"1\"\n                        ></v-slider>\n                        <v-switch\n                        v-model=\"act_info.upload.rename\"\n                        inset\n                        label=\"上传后重新命名\"\n                        class=\"my-0\"\n                        ></v-switch>\n                    </v-card-text>\n                </v-card>\n                <v-card v-if=\"act_edit_mode=='edit' && act_info.upload.enabled==true\" class=\"my-3\">\n                    <v-card-title>文件上传设置浏览</v-card-title>\n                    <v-card-text>\n                        <v-row class=\"d-flex flex-wrap\">\n                            <v-col><div class=\"text-subtitle-2\">文件类型：</div><v-chip v-for=\"(item,i) in act_info.upload.type\" :key=\"i\" class=\"ma-2\" label>{{item}}</v-chip></v-col>\n                            <v-col><div class=\"text-subtitle-2\">大小限制：</div><v-chip label class=\"ma-2\" >{{act_info.upload.max_size}} MB</v-chip></v-col>\n                            <v-col><div class=\"text-subtitle-2\">上传后是否重新命名：</div><v-chip label class=\"ma-2\" >{{act_info.upload.rename}}</v-chip></v-col>\n                        </v-row>\n                    </v-card-text>\n                </v-card>\n                <!-- 上传设置结束 -->\n\n                <!-- 结束时间选择 -->\n                <v-menu\n                        ref=\"end_date_menu\"\n                        v-model=\"date_time_menu.end_date_menu\"\n                        :close-on-content-click=\"false\"\n                        :return-value.sync=\"act_info.end_time.d\"\n                        transition=\"scale-transition\"\n                        offset-y\n                        min-width=\"auto\"\n                >\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                                v-model=\"act_info.end_time.d\"\n                                label=\"选择活动结束日期\"\n                                prepend-icon=\"mdi-calendar\"\n                                readonly\n                                v-bind=\"attrs\"\n                                v-on=\"on\"\n                        ></v-text-field>\n                    </template>\n                    <v-date-picker\n                            v-model=\"act_info.end_time.d\"\n                            no-title\n                            scrollable\n                    >\n                        <v-spacer></v-spacer>\n                        <v-btn\n                                text\n                                color=\"primary\"\n                                @click=\"date_time_menu.end_date_menu = false\"\n                        >\n                            Cancel\n                        </v-btn>\n                        <v-btn\n                                text\n                                color=\"primary\"\n                                @click=\"$refs.end_date_menu.save(act_info.end_time.d)\"\n                        >\n                            OK\n                        </v-btn>\n                    </v-date-picker>\n                </v-menu>\n                <v-menu\n                        ref=\"end_time_menu\"\n                        v-model=\"date_time_menu.end_time_menu\"\n                        :close-on-content-click=\"false\"\n                        :nudge-right=\"40\"\n                        :return-value.sync=\"act_info.end_time.t\"\n                        transition=\"scale-transition\"\n                        offset-y\n                        max-width=\"290px\"\n                        min-width=\"290px\"\n                >\n                    <template v-slot:activator=\"{ on, attrs }\">\n                        <v-text-field\n                                v-model=\"act_info.end_time.t\"\n                                label=\"活动结束时间(24小时制)\"\n                                prepend-icon=\"mdi-clock-time-four-outline\"\n                                readonly\n                                v-bind=\"attrs\"\n                                v-on=\"on\"\n                        ></v-text-field>\n                    </template>\n                    <v-time-picker\n                            v-if=\"date_time_menu.end_time_menu\"\n                            v-model=\"act_info.end_time.t\"\n                            format=\"24hr\"\n                            full-width\n                            @click:minute=\"$refs.end_time_menu.save(act_info.end_time.t)\"\n                    ></v-time-picker>\n                </v-menu>\n\n                <small>完成编辑后记得点击右上角的“保存”按钮</small>\n            </v-container>\n            <!-- 结束时间选择 -->\n            \n\n            <!-- 编辑区结束 -->\n\n        </v-card>\n        </v-dialog>\n        \n        <!-- 活动统计数据 sts_dialog -->\n        <v-dialog\n            v-model=\"sts_dialog\"\n            fullscreen\n            hide-overlay\n            transition=\"dialog-bottom-transition\"\n        >\n        <v-card>\n            <v-toolbar\n            dark\n            color=\"info\"\n            >\n                <v-btn\n                icon\n                dark\n                @click=\"sts_dialog = false\"\n                >\n                <v-icon>mdi-close</v-icon>\n                </v-btn>\n                <v-toolbar-title>活动统计数据</v-toolbar-title>\n                <v-spacer></v-spacer>\n            </v-toolbar>\n            <div class=\"pa-4\">\n            <div class=\"text-caption\">\n                数据统计刷新存在0~10s延迟。\n            </div>\n            <div class=\"text-caption\" v-if=\"export_data.act_id != 0\">\n                当前活动已开启文件上传功能。<br>点击“已完成”用户列表项可查看用户上传的文件。<br>点击“导出所有文件”可将用户上传的文件打包下载。\n            </div>\n            </div>\n            <v-card class=\"ma-2\">\n            <v-card-text v-if=\"export_data.act_id != 0\">\n                <v-btn\n                    depressed\n                    @click=\"export_file\"\n                    v-if=\"export_data.url ==''\"\n                    :loading=\"export_data.loading\"\n                    class=\"ma-3\"\n                >\n                导出所有文件\n                </v-btn>\n                <v-btn\n                    depressed\n                    color=\"primary\"\n                    target=\"_blank\"\n                    :href=\"export_data.url\"\n                    v-if=\"export_data.url !=''\"\n                    class=\"ma-3\"\n                >\n                下载\n                </v-btn>\n                <small v-if=\"export_data.url !=''\">下载链接有效期为5分钟。</small>\n            </v-card-text>\n            <v-list dense class=\"pa-2\">\n                <v-subheader>未完成</v-subheader>\n                <v-list-item-group\n                    color=\"primary\"\n                >\n                    <v-list-item\n                    v-for=\"(item,i) in sts.unfinished_list\"\n                    :key=\"i\"\n                    >\n                    <v-list-item-icon>\n                        <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                        <v-list-item-title>{{item.user_name}} (UID:{{item.user_id}})</v-list-item-title>\n                    </v-list-item-content>\n                    </v-list-item>\n                </v-list-item-group>\n\n                <v-divider></v-divider>\n\n                <v-subheader>已完成</v-subheader>\n\n                <!-- 无文件 -->\n                <v-list-item-group\n                    color=\"primary\"\n                    v-if=\"export_data.act_id ==0\"\n                >\n                    <v-list-item\n                    v-for=\"(item,i) in sts.finished_list\"\n                    :key=\"i\"\n                    >\n                    <v-list-item-icon>\n                        <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                        <v-list-item-title>{{item.user_name}} (UID:{{item.user_id}})</v-list-item-title>\n                        <v-list-item-subtitle>完成时间:{{item.date_time}}</v-list-item-subtitle>\n                    </v-list-item-content>\n                    </v-list-item>\n                </v-list-item-group>\n                <!-- 无文件 -->\n\n                <!-- 有文件预览 -->\n                <v-list-item-group\n                    color=\"primary\"\n                    v-if=\"export_data.act_id !=0\"\n                >\n                    <v-list-item\n                    v-for=\"(item,i) in sts.finished_list\"\n                    :key=\"i\"\n                    @click=\"get_file_preview(item)\"\n                    >\n                    <v-list-item-icon>\n                        <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                        <v-list-item-title>{{item.user_name}} (UID:{{item.user_id}})</v-list-item-title>\n                        <v-list-item-subtitle>完成时间:{{item.date_time}}&nbsp;<v-icon small>mdi-cloud-check-outline</v-icon></v-list-item-subtitle>\n                    </v-list-item-content>\n                    </v-list-item>\n                </v-list-item-group>\n                <!-- 有文件预览 -->\n            </v-list>\n            </v-card>\n            \n        </v-card>\n        </v-dialog>\n\n        <!-- 用户管理 user_dialog -->\n        <v-dialog\n            v-model=\"user_dialog\"\n            fullscreen\n            hide-overlay\n            transition=\"dialog-bottom-transition\"\n        >\n        <v-card class=\"pa-4\">\n            <v-toolbar\n            dark\n            color=\"info\"\n            >\n                <v-btn\n                icon\n                dark\n                @click=\"user_dialog = false\"\n                >\n                <v-icon>mdi-close</v-icon>\n                </v-btn>\n                <v-toolbar-title>班级成员管理</v-toolbar-title>\n                <v-spacer></v-spacer>\n                <v-btn depressed @click=\"get_user_list\" dark><v-icon>mdi-refresh</v-icon>刷新</v-btn>\n            </v-toolbar>\n\n            <v-card-text>\n                <v-alert\n                shaped\n                type=\"info\"\n                class=\"mx-auto ma-4\"\n                >\n                【踢出班级】:点击按钮后，将立即清除用户的签到记录，记录无法恢复。用户将重新回到“初始化”阶段。谨慎操作！\n                </v-alert>\n                <v-card class=\"mx-auto ma-4\">\n                    <v-card-title>\n                    所有班级成员\n                    <v-spacer></v-spacer>\n                    <v-text-field\n                            v-model=\"userlist_search\"\n                            append-icon=\"mdi-magnify\"\n                            label=\"搜索\"\n                            single-line\n                            hide-details\n                        ></v-text-field>\n                        </v-card-title>\n                    <v-card-text>\n                        <v-data-table\n                        :headers=\"userlist_headers\"\n                        :items=\"user_list\"\n                        :search=\"userlist_search\"\n                        >\n                            <template v-slot:[`item.is_admin`]=\"{ item }\">\n                                <v-icon v-if=\"item.admin == 1\" color=\"purple\">mdi-check-circle-outline</v-icon>\n                                <v-icon v-if=\"item.admin == 0\">mdi-close-circle-outline</v-icon>\n                            </template>\n                            <template v-slot:[`item.actions`]=\"{ item }\">\n                                <v-btn depressed small class=\"ma-2\" v-if=\"item.admin == 0\" color=\"primary\" @click=\"set_admin(item,1)\">设为管理员</v-btn>\n                                <v-btn depressed small class=\"ma-2\" v-if=\"item.admin == 1\" @click=\"set_admin(item,0)\">撤销管理员</v-btn>\n\n                                <v-btn depressed small class=\"ma-2\" @click=\"confirn_delete(item)\" color=\"error\">踢出班级</v-btn>\n                            </template>\n                        </v-data-table>\n                    </v-card-text>\n                </v-card>\n            </v-card-text>\n        </v-card>\n        </v-dialog>\n\n        <!-- 删除用户 dialogDelete -->\n        <v-dialog v-model=\"dialogDelete.open\" max-width=\"500px\">\n            <v-card>\n                <v-card-title class=\"text-h5\">确定要删除该用户?</v-card-title>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"blue darken-1\" text @click=\"dialogDelete.open=false\">取消</v-btn>\n                    <v-btn color=\"blue darken-1\" text @click=\"op_user\">OK</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n\n        <!-- 文件预览 -->\n        <v-dialog v-model=\"upload_preview.open\" max-width=\"500px\" v-if=\"upload_preview.open == true\">\n            <v-card>\n                <v-card-title class=\"text-h5\">用户文件预览</v-card-title>\n                <v-card-text v-if=\"upload_preview.item.type=='image'\">\n                    <!-- 图片展示 -->\n                    <v-img\n                    max-width=\"400\"\n                    class=\"ma-auto\"\n                    :src=\"upload_preview.item.img_url\"\n                    >\n                    <template v-slot:placeholder>\n                        <v-row\n                        class=\"fill-height ma-0\"\n                        align=\"center\"\n                        justify=\"center\"\n                        >\n                        <v-progress-circular\n                            indeterminate\n                            color=\"blue\"\n                        ></v-progress-circular>\n                        </v-row>\n                    </template>\n                    </v-img>\n                </v-card-text>\n                <v-card-text v-if=\"upload_preview.item.type=='other'\">\n                    <!-- 下载 -->\n                    <v-btn depressed :href=\"upload_preview.item.download_url\" target=\"_blank\">下载</v-btn>\n                </v-card-text>\n                <v-card-text>\n                    图片/文件下载临时地址有效期为5分钟。\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"blue darken-1\" text @click=\"upload_preview.open=false\" right>关闭</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n\n    </v-main>\n\n  </v-app>\n  </div>\n</template>\n\n<script>\nconst backEndUrl = process.env.VUE_APP_API_URL;\nimport nProgress from 'nprogress'\nexport default {\n    name:\"AdminIndex\",\n    data(){\n      return {\n        announcement_rule:[v => v.length <= 50 || '字数不能超过50'],\n        name_rule:[v => v.length <= 40 || '字数不能超过40'],\n        cheerText_rule:[v => v.length <= 20 || '字数不能超过20'],\n      dialog:{\n          open:false,\n          title:'',\n          text:''\n      },\n      act_list:{\n        active_num:0,\n        active_list:[],\n        history_list:[],\n      },\n      class_info:{\n          class_name:\"\",\n          class_code:\"\",\n          total:0,\n          act_id:\"\",\n          act_name:''\n      },\n      class_edit:{\n          class_name:\"\",\n          class_code:\"\",\n      },\n      act_dialog:false,\n      editClassDialog:false,\n      act_list_dialog:false,\n      loading_dialog:false,\n      sts_dialog:false,\n      user_dialog:false,\n      editUserDialog:false,\n      dialogDelete:{\n          item:null,\n          open:false\n      },\n      act_list_tab:0,\n      act_info:{\n          name:\"\",\n          active:false,\n          daily_notify:true,\n          pic:\"\",\n          announcement:\"\",\n          cheer_text:\"\",\n          end_time:{\n              d:\"\",\n              t:\"\",\n          },\n          upload:{\n            enabled:false,\n            type:[],\n            max_size:5,\n            rename:true\n          },\n      },    \n      sts:{\n        done:0,\n        total:0,\n        unfinished_list:[],\n        finished_list:[],\n      },\n      act_edit_mode:\"edit\",\n      date_time_menu:{\n        begin_date_menu: false,\n        begin_time_menu:false,\n        end_date_menu: false,\n        end_time_menu:false\n        },\n        csrfHeader:{},\n        user_list:[],\n        userlist_search:'',\n        userlist_headers: [\n          {\n            text: 'ID',\n            align: 'start',\n            value: 'id',\n          },\n          { text: '姓名', value: 'name' },\n          { text: '是否为管理员', value: 'is_admin',sortable: false,},\n          { text: '操作', value: 'actions',sortable: false,},\n        ],\n        export_data:{\n            act_id:0,\n            loading:false,\n            url:\"\"\n        },\n        upload_preview:{\n          open:false,\n          item:null,\n        },\n        get_rd_pic_btn_loading:false,\n      }\n    },\n    mounted:function(){\n        //获取csrf-token\n        if (this.$cookies.get(\"CSRF-TOKEN\")==null){\n          this.$router.push({path:\"/error/csrf-token获取失败，请换个浏览器登录\"})\n          return\n        }else{\n          this.csrfHeader = {\"X-CSRF-TOKEN\":this.$cookies.get(\"CSRF-TOKEN\")}\n        }\n\n        //获取班级信息\n        this.initClass()\n    },\n    methods:{\n        initClass:function(){\n            let _this = this\n            this.axios({\n                method: 'get',\n                url: backEndUrl+\"/api/admin/class/info\",\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.class_info = res.data.data\n                }else{\n                    _this.error(res.data.msg)\n                }\n            })\n            .catch(function (error) {\n                _this.error(error)\n            })\n        },\n        get_random_pic:function(){\n            let _this = this\n            this.get_rd_pic_btn_loading = true\n            this.axios({\n                method: 'get',\n                url: backEndUrl+\"/api/admin/act/getRandomPic\",\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.act_info.pic = res.data.data.url\n                }else{\n                    _this.error(res.data.msg)\n                }\n                _this.get_rd_pic_btn_loading = false\n            })\n            .catch(function (error) {\n                _this.error(error)\n                _this.get_rd_pic_btn_loading = false\n            })\n        },\n        edit_act:function(act_item){\n            //获取要编辑的活动信息\n            let _this = this\n            this.axios({\n                method: 'get',\n                url: backEndUrl+\"/api/admin/act/info\",\n                params:{\n                    act_id:act_item.act_id,\n                }\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.act_info = res.data.data\n                    _this.act_dialog = true\n                    _this.act_edit_mode = \"edit\"\n                }else{\n                    _this.error(res.data.msg)\n                }\n            })\n            .catch(function (error) {\n                _this.error(error)\n            })\n        },\n        new_act:function(){\n            this.act_info.name = \"\"\n            this.act_info.active = true\n            this.act_info.daily_notify = true\n            this.act_info.announcement = \"\"\n            this.act_info.pic = \"\"\n            this.act_info.cheer_text = \"恭喜完成\"\n            this.act_info.end_time.d = \"\"\n            this.act_info.end_time.t = \"\"\n            this.act_info.upload.enabled = false\n            this.act_info.upload.max_size = 5\n            this.act_info.upload.rename = true\n            this.act_info.upload.type = []\n\n            this.act_dialog = true\n            this.act_edit_mode = \"new\"\n            this.get_random_pic()\n        },\n        edit_class:function(){\n            this.editClassDialog = true\n            this.class_edit.class_name = this.class_info.class_name\n            this.class_edit.class_code = this.class_info.class_code\n        },\n        show_act_list:function(){\n            let _this = this\n            this.loading_dialog = true\n            this.axios({\n                method: 'get',\n                url: backEndUrl+\"/api/admin/act/list\",\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.act_list = res.data.data\n                    _this.loading_dialog = false\n                }else{\n                    _this.error(res.data.msg)\n                }\n            }).catch(function (error) {\n                _this.error(error)\n            })\n            _this.act_list_dialog = true\n        },\n        save_class:function(){\n            let _this = this\n            this.axios({\n                method: 'post',\n                url: backEndUrl+\"/api/admin/class/edit\",\n                headers:_this.csrfHeader,\n                data:_this.class_edit\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.success(\"保存成功\")\n                    _this.editClassDialog = false\n                    _this.initClass()\n                }else{\n                    _this.error(res.data.msg)\n                }\n            })\n            .catch(function (error) {\n                _this.error(error)\n            })\n        },\n        save_act:function(){\n            nProgress.start()\n            let apiUrl = \"\"\n            let _this = this\n            if (this.act_edit_mode == \"new\"){\n                apiUrl = \"/api/admin/act/new\"\n            }else if (this.act_edit_mode == \"edit\"){\n                apiUrl = \"/api/admin/act/edit\"\n            }\n\n            this.axios({\n                method: 'post',\n                url: backEndUrl+apiUrl,\n                headers:_this.csrfHeader,\n                data:_this.act_info\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.success(\"保存成功\")\n                    _this.act_dialog = false\n                    _this.show_act_list()\n                }else{\n                    _this.error(res.data.msg)\n                }\n                nProgress.done()\n            })\n            .catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n                nProgress.done()\n            })\n\n        },\n        get_sts:function(info_item){\n            let _this = this\n            //获取统计数据\n            this.axios({\n                method: 'get',\n                url: backEndUrl+'/api/admin/act/statistic',\n                params:{\n                    act_id:info_item.act_id\n                }\n            }).then(function (res) {\n                // 处理成功情况\n                if (res.data.status == 0){\n                    _this.sts.done = res.data.data.done\n                    _this.sts.total = res.data.data.total\n                    _this.sts.unfinished_list = res.data.data.unfinished_list\n                    _this.sts.finished_list = res.data.data.finished_list\n\n                    if(info_item.type == 1){\n                        _this.export_data.act_id = info_item.act_id\n                    }else{\n                        _this.export_data.act_id = 0\n                    }\n                    _this.export_data.url = \"\"\n                    \n                    _this.sts_dialog = true\n                }else{\n                    _this.error(res.data.msg)\n                }\n            })\n            .catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n        },\n        show_user_list:function(){\n            let _this = this\n            //获取用户\n            this.axios({\n                method: 'get',\n                url: backEndUrl+'/api/admin/user/list',\n            }).then(function (res) {\n                // 处理成功情况\n                if (res.data.status == 0){\n                    _this.user_list = res.data.data.data\n                    _this.user_dialog = true\n                }else{\n                    _this.error(res.data.msg)\n                }\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n        },\n        get_user_list:function(){\n            let _this = this\n            //获取用户\n            this.axios({\n                method: 'get',\n                url: backEndUrl+'/api/admin/user/list',\n            }).then(function (res) {\n                // 处理成功情况\n                if (res.data.status == 0){\n                    _this.user_list = res.data.data.data\n                }else{\n                    _this.error(res.data.msg)\n                }\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n        },\n        op_user:function(){\n            let _this = this\n            \n            this.axios({\n                method: 'post',\n                url: backEndUrl+\"/api/admin/user/del\",\n                headers:_this.csrfHeader,\n                data:{\n                    user_id:_this.dialogDelete.item.user_id,\n                    sign:_this.dialogDelete.item.sign\n                },\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.success(\"操作成功\")\n                }else{\n                    _this.error(res.data.msg)\n                }\n                _this.dialogDelete.open=false\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n\n        },\n        set_admin:function(item,set_to){\n            let _this = this\n            \n            this.axios({\n                method: 'post',\n                url: backEndUrl+\"/api/admin/user/setAdmin\",\n                headers:_this.csrfHeader,\n                data:{\n                    user_id:item.user_id,\n                    set_to:set_to,\n                    sign:item.sign\n                },\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.success(\"操作成功\")\n                }else{\n                    _this.error(res.data.msg)\n                }\n                _this.dialogDelete.open=false\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n\n        },\n        confirn_delete:function(item){\n            this.dialogDelete.item = item\n            this.dialogDelete.open = true\n        },\n        export_file:function(){\n            let _this = this\n            this.export_data.loading = true\n            this.axios({\n                method: 'post',\n                url: backEndUrl+\"/api/admin/act/export\",\n                headers:_this.csrfHeader,\n                data:{\n                    act_id:_this.export_data.act_id,\n                },\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.export_data.url = res.data.data.download_url\n                }else{\n                    _this.error(res.data.msg)\n                }\n                _this.export_data.loading = false\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n        },\n        get_file_preview:function(sts_item){\n            let _this = this\n            this.axios({\n                method: 'post',\n                url: backEndUrl+\"/api/admin/act/viewFile\",\n                headers:_this.csrfHeader,\n                data:{\n                    act_id:_this.export_data.act_id,\n                    user_id:sts_item.user_id,\n                },\n            }).then(function (res) {\n                if (res.data.status == 0){\n                    _this.upload_preview.item = res.data.data\n                    _this.upload_preview.open = true\n                }else{\n                    _this.error(res.data.msg)\n                }\n            }).catch(function (error) {\n                // 处理错误情况\n                _this.error(error)\n            })\n        },\n        success:function(text){\n            this.dialog.open = true\n            this.dialog.title = '成功'\n            this.dialog.text = text\n        },\n        error:function(text){\n            this.dialog.open = true\n            this.dialog.title = '失败'\n            this.dialog.text = text\n        },\n    },\n    computed:{\n        img_preview:function(){\n            if (this.act_info.pic == \"\"){\n                return \"/static/image/default.jpg\"\n            }else{\n                return this.act_info.pic\n            }\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>"]}]}