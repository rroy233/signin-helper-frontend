{"remainingRequest":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/src/components/Admin/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/src/components/Admin/Index.vue","mtime":1670932421020},{"path":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1648128532195},{"path":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/node_modules/babel-loader/lib/index.js","mtime":1648128535778},{"path":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1648128532195},{"path":"/Users/Roy/Documents/开发/1.已上线/signin/Frontend/signin-helper-frontend/node_modules/vue-loader/lib/index.js","mtime":1648128535013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGJhY2tFbmRVcmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkw7CmltcG9ydCBuUHJvZ3Jlc3MgZnJvbSAibnByb2dyZXNzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBZG1pbkluZGV4IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYW5ub3VuY2VtZW50X3J1bGU6IFsodikgPT4gdi5sZW5ndGggPD0gNTAgfHwgIuWtl+aVsOS4jeiDvei2hei/hzUwIl0sCiAgICAgIG5hbWVfcnVsZTogWyh2KSA9PiB2Lmxlbmd0aCA8PSA0MCB8fCAi5a2X5pWw5LiN6IO96LaF6L+HNDAiXSwKICAgICAgY2hlZXJUZXh0X3J1bGU6IFsodikgPT4gdi5sZW5ndGggPD0gMjAgfHwgIuWtl+aVsOS4jeiDvei2hei/hzIwIl0sCiAgICAgIGRpYWxvZzogewogICAgICAgIG9wZW46IGZhbHNlLAogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICB0ZXh0OiAiIiwKICAgICAgfSwKICAgICAgYWN0X2xpc3Q6IHsKICAgICAgICBhY3RpdmVfbnVtOiAwLAogICAgICAgIGFjdGl2ZV9saXN0OiBbXSwKICAgICAgICBoaXN0b3J5X2xpc3Q6IFtdLAogICAgICAgIHdhaXRpbmdfbGlzdDogW10sCiAgICAgICAgd2FpdGluZ19udW06MCwKICAgICAgfSwKICAgICAgY2xhc3NfaW5mbzogewogICAgICAgIGNsYXNzX25hbWU6ICIiLAogICAgICAgIGNsYXNzX2NvZGU6ICIiLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGFjdF9pZDogIiIsCiAgICAgICAgYWN0X25hbWU6ICIiLAogICAgICB9LAogICAgICBjbGFzc19lZGl0OiB7CiAgICAgICAgY2xhc3NfbmFtZTogIiIsCiAgICAgICAgY2xhc3NfY29kZTogIiIsCiAgICAgIH0sCiAgICAgIGFjdF9kaWFsb2c6IGZhbHNlLAogICAgICBlZGl0Q2xhc3NEaWFsb2c6IGZhbHNlLAogICAgICBhY3RfbGlzdF9kaWFsb2c6IGZhbHNlLAogICAgICBsb2FkaW5nX2RpYWxvZzogZmFsc2UsCiAgICAgIHN0c19kaWFsb2c6IGZhbHNlLAogICAgICB1c2VyX2RpYWxvZzogZmFsc2UsCiAgICAgIGVkaXRVc2VyRGlhbG9nOiBmYWxzZSwKICAgICAgZGlhbG9nRGVsZXRlOiB7CiAgICAgICAgaXRlbTogbnVsbCwKICAgICAgICBvcGVuOiBmYWxzZSwKICAgICAgfSwKICAgICAgYWN0X2xpc3RfdGFiOiAwLAogICAgICBhY3RfaW5mbzogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGFjdGl2ZTogZmFsc2UsCiAgICAgICAgZGFpbHlfbm90aWZ5OiB0cnVlLAogICAgICAgIHBpYzogIiIsCiAgICAgICAgYW5ub3VuY2VtZW50OiAiIiwKICAgICAgICBjaGVlcl90ZXh0OiAiIiwKICAgICAgICBuZWVkX3dhaXQ6IGZhbHNlLAogICAgICAgIGJlZ2luX3RpbWU6IHsKICAgICAgICAgIGQ6ICIiLAogICAgICAgICAgdDogIiIsCiAgICAgICAgfSwKICAgICAgICBlbmRfdGltZTogewogICAgICAgICAgZDogIiIsCiAgICAgICAgICB0OiAiIiwKICAgICAgICB9LAogICAgICAgIHVwbG9hZDogewogICAgICAgICAgZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICB0eXBlOiBbXSwKICAgICAgICAgIG1heF9zaXplOiA1LAogICAgICAgICAgcmVuYW1lOiB0cnVlLAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIG5lZWRfd2FpdDpmYWxzZSwKICAgICAgYWN0X2FjdGl2ZTpmYWxzZSwKICAgICAgc3RzOiB7CiAgICAgICAgZG9uZTogMCwKICAgICAgICB0b3RhbDogMCwKICAgICAgICB1bmZpbmlzaGVkX2xpc3Q6IFtdLAogICAgICAgIGZpbmlzaGVkX2xpc3Q6IFtdLAogICAgICB9LAogICAgICBhY3RfZWRpdF9tb2RlOiAiZWRpdCIsCiAgICAgIGRhdGVfdGltZV9tZW51OiB7CiAgICAgICAgYmVnaW5fZGF0ZV9tZW51OiBmYWxzZSwKICAgICAgICBiZWdpbl90aW1lX21lbnU6IGZhbHNlLAogICAgICAgIGVuZF9kYXRlX21lbnU6IGZhbHNlLAogICAgICAgIGVuZF90aW1lX21lbnU6IGZhbHNlLAogICAgICB9LAogICAgICBjc3JmSGVhZGVyOiB7fSwKICAgICAgdXNlcl9saXN0OiBbXSwKICAgICAgdXNlcmxpc3Rfc2VhcmNoOiAiIiwKICAgICAgdXNlcmxpc3RfaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLluo/lj7ciLAogICAgICAgICAgYWxpZ246ICJzdGFydCIsCiAgICAgICAgICB2YWx1ZTogImlkIiwKICAgICAgICB9LAogICAgICAgIHsgdGV4dDogIuWnk+WQjSIsIHZhbHVlOiAibmFtZSIgfSwKICAgICAgICB7IHRleHQ6ICLpgq7nrrEiLCB2YWx1ZTogImVtYWlsIiB9LAogICAgICAgIHsgdGV4dDogIumAmuefpeaWueW8jyIsIHZhbHVlOiAibm90aV90eXBlIiB9LAogICAgICAgIHsgdGV4dDogIuaYr+WQpuS4uueuoeeQhuWRmCIsIHZhbHVlOiAiaXNfYWRtaW4iLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgICAgICB7IHRleHQ6ICLmk43kvZwiLCB2YWx1ZTogImFjdGlvbnMiLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgICAgXSwKICAgICAgZXhwb3J0X2RhdGE6IHsKICAgICAgICBhY3RfaWQ6IDAsCiAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgdXJsOiAiIiwKICAgICAgfSwKICAgICAgdXBsb2FkX3ByZXZpZXc6IHsKICAgICAgICBvcGVuOiBmYWxzZSwKICAgICAgICBpdGVtOiBudWxsLAogICAgICB9LAogICAgICBnZXRfcmRfcGljX2J0bl9sb2FkaW5nOiBmYWxzZSwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAvL+iOt+WPlmNzcmYtdG9rZW4KICAgIGlmICh0aGlzLiRjb29raWVzLmdldCgiQ1NSRi1UT0tFTiIpID09IG51bGwpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvZXJyb3IvY3NyZi10b2tlbuiOt+WPluWksei0pe+8jOivt+aNouS4qua1j+iniOWZqOeZu+W9lSIsCiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNzcmZIZWFkZXIgPSB7ICJYLUNTUkYtVE9LRU4iOiB0aGlzLiRjb29raWVzLmdldCgiQ1NSRi1UT0tFTiIpIH07CiAgICB9CgogICAgLy/ojrflj5bnj63nuqfkv6Hmga8KICAgIHRoaXMuaW5pdENsYXNzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0Q2xhc3M6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6IGJhY2tFbmRVcmwgKyAiL2FwaS9hZG1pbi9jbGFzcy9pbmZvIiwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgX3RoaXMuY2xhc3NfaW5mbyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldF9yYW5kb21fcGljOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuZ2V0X3JkX3BpY19idG5fbG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vYWN0L2dldFJhbmRvbVBpYyIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgIF90aGlzLmFjdF9pbmZvLnBpYyA9IHJlcy5kYXRhLmRhdGEudXJsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzLmdldF9yZF9waWNfYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKTsKICAgICAgICAgIF90aGlzLmdldF9yZF9waWNfYnRuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0X2FjdDogZnVuY3Rpb24gKGFjdF9pdGVtKSB7CiAgICAgIC8v6I635Y+W6KaB57yW6L6R55qE5rS75Yqo5L+h5oGvCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vYWN0L2luZm8iLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgYWN0X2lkOiBhY3RfaXRlbS5hY3RfaWQsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgX3RoaXMuYWN0X2luZm8gPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICBfdGhpcy5hY3RfYWN0aXZlID0gX3RoaXMuYWN0X2luZm8uYWN0aXZlOwogICAgICAgICAgICBfdGhpcy5uZWVkX3dhaXQgPSBfdGhpcy5hY3RfaW5mby5uZWVkX3dhaXQ7CiAgICAgICAgICAgIF90aGlzLmFjdF9kaWFsb2cgPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5hY3RfZWRpdF9tb2RlID0gImVkaXQiOwogICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5hY3RfaW5mbyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIG5ld19hY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5hY3RfaW5mby5uYW1lID0gIiI7CiAgICAgIHRoaXMuYWN0X2luZm8uYWN0aXZlID0gdHJ1ZTsKICAgICAgdGhpcy5hY3RfaW5mby5kYWlseV9ub3RpZnkgPSB0cnVlOwogICAgICB0aGlzLmFjdF9pbmZvLmFubm91bmNlbWVudCA9ICIiOwogICAgICB0aGlzLmFjdF9pbmZvLnBpYyA9ICIiOwogICAgICB0aGlzLmFjdF9pbmZvLmNoZWVyX3RleHQgPSAi5oGt5Zac5a6M5oiQIjsKICAgICAgdGhpcy5hY3RfaW5mby5iZWdpbl90aW1lLmQgPSB0aGlzLnRvZGF5X2RhdGU7CiAgICAgIHRoaXMuYWN0X2luZm8uYmVnaW5fdGltZS50ID0gIjAwOjAwIjsKICAgICAgdGhpcy5hY3RfaW5mby5lbmRfdGltZS5kID0gdGhpcy50b2RheV9kYXRlOwogICAgICB0aGlzLmFjdF9pbmZvLmVuZF90aW1lLnQgPSAiMDA6MDAiOwogICAgICB0aGlzLmFjdF9pbmZvLnVwbG9hZC5lbmFibGVkID0gZmFsc2U7CiAgICAgIHRoaXMuYWN0X2luZm8udXBsb2FkLm1heF9zaXplID0gNTsKICAgICAgdGhpcy5hY3RfaW5mby51cGxvYWQucmVuYW1lID0gdHJ1ZTsKICAgICAgdGhpcy5hY3RfaW5mby51cGxvYWQudHlwZSA9IFtdOwoKICAgICAgdGhpcy5hY3RfZGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5hY3RfZWRpdF9tb2RlID0gIm5ldyI7CiAgICAgIHRoaXMuZ2V0X3JhbmRvbV9waWMoKTsKICAgIH0sCiAgICBlZGl0X2NsYXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZWRpdENsYXNzRGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5jbGFzc19lZGl0LmNsYXNzX25hbWUgPSB0aGlzLmNsYXNzX2luZm8uY2xhc3NfbmFtZTsKICAgICAgdGhpcy5jbGFzc19lZGl0LmNsYXNzX2NvZGUgPSB0aGlzLmNsYXNzX2luZm8uY2xhc3NfY29kZTsKICAgIH0sCiAgICBzaG93X2FjdF9saXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZ19kaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogYmFja0VuZFVybCArICIvYXBpL2FkbWluL2FjdC9saXN0IiwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgX3RoaXMuYWN0X2xpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICBfdGhpcy5sb2FkaW5nX2RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuZXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgX3RoaXMuYWN0X2xpc3RfZGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBzYXZlX2NsYXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogYmFja0VuZFVybCArICIvYXBpL2FkbWluL2NsYXNzL2VkaXQiLAogICAgICAgIGhlYWRlcnM6IF90aGlzLmNzcmZIZWFkZXIsCiAgICAgICAgZGF0YTogX3RoaXMuY2xhc3NfZWRpdCwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgX3RoaXMuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIik7CiAgICAgICAgICAgIF90aGlzLmVkaXRDbGFzc0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5pbml0Q2xhc3MoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2F2ZV9hY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgblByb2dyZXNzLnN0YXJ0KCk7CiAgICAgIGxldCBhcGlVcmwgPSAiIjsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMuYWN0X2VkaXRfbW9kZSA9PSAibmV3IikgewogICAgICAgIGFwaVVybCA9ICIvYXBpL2FkbWluL2FjdC9uZXciOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0X2VkaXRfbW9kZSA9PSAiZWRpdCIpIHsKICAgICAgICBhcGlVcmwgPSAiL2FwaS9hZG1pbi9hY3QvZWRpdCI7CiAgICAgIH0KCiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogYmFja0VuZFVybCArIGFwaVVybCwKICAgICAgICBoZWFkZXJzOiBfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgIGRhdGE6IF90aGlzLmFjdF9pbmZvLAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBfdGhpcy5zdWNjZXNzKCLkv53lrZjmiJDlip8iKTsKICAgICAgICAgICAgX3RoaXMuYWN0X2RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5zaG93X2FjdF9saXN0KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgICAgblByb2dyZXNzLmRvbmUoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgICAgblByb2dyZXNzLmRvbmUoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRfc3RzOiBmdW5jdGlvbiAoaW5mb19pdGVtKSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIC8v6I635Y+W57uf6K6h5pWw5o2uCiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vYWN0L3N0YXRpc3RpYyIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBhY3RfaWQ6IGluZm9faXRlbS5hY3RfaWQsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyDlpITnkIbmiJDlip/mg4XlhrUKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBfdGhpcy5zdHMuZG9uZSA9IHJlcy5kYXRhLmRhdGEuZG9uZTsKICAgICAgICAgICAgX3RoaXMuc3RzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgICAgX3RoaXMuc3RzLnVuZmluaXNoZWRfbGlzdCA9IHJlcy5kYXRhLmRhdGEudW5maW5pc2hlZF9saXN0OwogICAgICAgICAgICBfdGhpcy5zdHMuZmluaXNoZWRfbGlzdCA9IHJlcy5kYXRhLmRhdGEuZmluaXNoZWRfbGlzdDsKCiAgICAgICAgICAgIGlmIChpbmZvX2l0ZW0udHlwZSA9PSAxKSB7CiAgICAgICAgICAgICAgX3RoaXMuZXhwb3J0X2RhdGEuYWN0X2lkID0gaW5mb19pdGVtLmFjdF9pZDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5leHBvcnRfZGF0YS5hY3RfaWQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLmV4cG9ydF9kYXRhLnVybCA9ICIiOwoKICAgICAgICAgICAgX3RoaXMuc3RzX2RpYWxvZyA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2hvd191c2VyX2xpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgblByb2dyZXNzLnN0YXJ0KCk7CiAgICAgIC8v6I635Y+W55So5oi3CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vdXNlci9saXN0IiwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyDlpITnkIbmiJDlip/mg4XlhrUKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBfdGhpcy51c2VyX2xpc3QgPSByZXMuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgIF90aGlzLnVzZXJfZGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgICBuUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0X3VzZXJfbGlzdDogZnVuY3Rpb24gKCkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICBuUHJvZ3Jlc3Muc3RhcnQoKTsKICAgICAgLy/ojrflj5bnlKjmiLcKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6IGJhY2tFbmRVcmwgKyAiL2FwaS9hZG1pbi91c2VyL2xpc3QiLAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIOWkhOeQhuaIkOWKn+aDheWGtQogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgIF90aGlzLnVzZXJfbGlzdCA9IHJlcy5kYXRhLmRhdGEuZGF0YTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgICBuUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgb3BfdXNlcjogZnVuY3Rpb24gKCkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vdXNlci9kZWwiLAogICAgICAgIGhlYWRlcnM6IF90aGlzLmNzcmZIZWFkZXIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdXNlcl9pZDogX3RoaXMuZGlhbG9nRGVsZXRlLml0ZW0udXNlcl9pZCwKICAgICAgICAgIHNpZ246IF90aGlzLmRpYWxvZ0RlbGV0ZS5pdGVtLnNpZ24sCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09IDApIHsKICAgICAgICAgICAgX3RoaXMuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXMuZGlhbG9nRGVsZXRlLm9wZW4gPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIHNldF9hZG1pbjogZnVuY3Rpb24gKGl0ZW0sIHNldF90bykgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IGJhY2tFbmRVcmwgKyAiL2FwaS9hZG1pbi91c2VyL3NldEFkbWluIiwKICAgICAgICBoZWFkZXJzOiBfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHVzZXJfaWQ6IGl0ZW0udXNlcl9pZCwKICAgICAgICAgIHNldF90bzogc2V0X3RvLAogICAgICAgICAgc2lnbjogaXRlbS5zaWduLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgIF90aGlzLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgICAgICBfdGhpcy5nZXRfdXNlcl9saXN0KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXMuZGlhbG9nRGVsZXRlLm9wZW4gPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIC8vIOWkhOeQhumUmeivr+aDheWGtQogICAgICAgICAgX3RoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpcm5fZGVsZXRlOiBmdW5jdGlvbiAoaXRlbSkgewogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZS5pdGVtID0gaXRlbTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUub3BlbiA9IHRydWU7CiAgICB9LAogICAgZXhwb3J0X2ZpbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy5leHBvcnRfZGF0YS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vYWN0L2V4cG9ydCIsCiAgICAgICAgaGVhZGVyczogX3RoaXMuY3NyZkhlYWRlciwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBhY3RfaWQ6IF90aGlzLmV4cG9ydF9kYXRhLmFjdF9pZCwKICAgICAgICB9LAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBfdGhpcy5leHBvcnRfZGF0YS51cmwgPSByZXMuZGF0YS5kYXRhLmRvd25sb2FkX3VybDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpcy5leHBvcnRfZGF0YS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAvLyDlpITnkIbplJnor6/mg4XlhrUKICAgICAgICAgIF90aGlzLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRfZmlsZV9wcmV2aWV3OiBmdW5jdGlvbiAoc3RzX2l0ZW0pIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBiYWNrRW5kVXJsICsgIi9hcGkvYWRtaW4vYWN0L3ZpZXdGaWxlIiwKICAgICAgICBoZWFkZXJzOiBfdGhpcy5jc3JmSGVhZGVyLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGFjdF9pZDogX3RoaXMuZXhwb3J0X2RhdGEuYWN0X2lkLAogICAgICAgICAgdXNlcl9pZDogc3RzX2l0ZW0udXNlcl9pZCwKICAgICAgICB9LAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICBfdGhpcy51cGxvYWRfcHJldmlldy5pdGVtID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgX3RoaXMudXBsb2FkX3ByZXZpZXcub3BlbiA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy8g5aSE55CG6ZSZ6K+v5oOF5Ya1CiAgICAgICAgICBfdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc3VjY2VzczogZnVuY3Rpb24gKHRleHQpIHsKICAgICAgdGhpcy5kaWFsb2cub3BlbiA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nLnRpdGxlID0gIuaIkOWKnyI7CiAgICAgIHRoaXMuZGlhbG9nLnRleHQgPSB0ZXh0OwogICAgfSwKICAgIGVycm9yOiBmdW5jdGlvbiAodGV4dCkgewogICAgICB0aGlzLmRpYWxvZy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2cudGl0bGUgPSAi5aSx6LSlIjsKICAgICAgdGhpcy5kaWFsb2cudGV4dCA9IHRleHQ7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGltZ19wcmV2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmFjdF9pbmZvLnBpYyA9PSAiIikgewogICAgICAgIHJldHVybiAiL3N0YXRpYy9pbWFnZS9kZWZhdWx0LmpwZyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWN0X2luZm8ucGljOwogICAgICB9CiAgICB9LAogICAgdG9kYXlfZGF0ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBteXllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgIHZhciBteW1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICAgICAgdmFyIG15d2Vla2RheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICBpZiAobXltb250aCA8IDEwKSB7CiAgICAgICAgbXltb250aCA9ICIwIiArIG15bW9udGg7CiAgICAgIH0KICAgICAgaWYgKG15d2Vla2RheSA8IDEwKSB7CiAgICAgICAgbXl3ZWVrZGF5ID0gIjAiICsgbXl3ZWVrZGF5OwogICAgICB9CiAgICAgIHJldHVybiBteXllYXIgKyAiLSIgKyBteW1vbnRoICsgIi0iICsgbXl3ZWVrZGF5OwogICAgfSwKICB9LAogIHdhdGNoOnsKICAgIG5lZWRfd2FpdDpmdW5jdGlvbihuKXsKICAgICAgICB0aGlzLmFjdF9pbmZvLm5lZWRfd2FpdCA9IG47CiAgICAgICAgaWYobj09dHJ1ZSl7CiAgICAgICAgICAgIHRoaXMuYWN0X2FjdGl2ZSA9IGZhbHNlOwogICAgICAgIH0KICAgIH0sCiAgICBhY3RfYWN0aXZlOmZ1bmN0aW9uKG4pewogICAgICAgIHRoaXMuYWN0X2luZm8uYWN0aXZlID0gbjsKICAgICAgICBpZihuPT10cnVlKXsKICAgICAgICAgIHRoaXMubmVlZF93YWl0ID0gIW47CiAgICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/Admin","sourcesContent":["<template>\n  <div>\n    <v-app id=\"inspire\">\n      <v-app-bar app>\n        <v-toolbar-title>管理员面板</v-toolbar-title>\n      </v-app-bar>\n\n      <v-main>\n        <v-container>\n          <!--  -->\n          <v-alert class=\"ma-2\" text color=\"info\">\n            <h3 class=\"text-h5\">管理员您好</h3>\n            <div>如果遇到什么问题可以联系QQ:2867984618</div>\n            <div>系统现已支持多任务并行，您可以在发布多个签到活动了。</div>\n\n            <v-divider class=\"my-4 info\" style=\"opacity: 0.22\"></v-divider>\n\n            <div class=\"v-text-body-1\">\n              您当前所管理的班级名称为<code>{{ class_info.class_name }}</code\n              >。 新同学可以使用班级代码<code>{{ class_info.class_code }}</code\n              >加入。\n            </div>\n          </v-alert>\n\n          <!-- 菜单开始 -->\n          <v-list-item-group color=\"primary\" class=\"ma-2\">\n            <v-list-item @click=\"edit_class\" link>\n              <v-list-item-icon>\n                <v-icon>mdi-google-classroom</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>修改班级信息</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item @click=\"show_act_list\" link>\n              <v-list-item-icon>\n                <v-icon>mdi-calendar-search</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>活动管理</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item @click=\"show_user_list\" link>\n              <v-list-item-icon>\n                <v-icon>mdi-account-cog-outline</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>班级成员管理</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-divider></v-divider>\n\n            <v-list-item to=\"/user\" link>\n              <v-list-item-icon>\n                <v-icon>mdi-keyboard-return</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>返回用户端</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n          <!-- 菜单结束 -->\n        </v-container>\n\n        <!-- 提示框 -->\n        <v-dialog v-model=\"dialog.open\" max-width=\"450px\">\n          <v-card>\n            <v-card-title>{{ dialog.title }}</v-card-title>\n            <v-card-text>\n              {{ dialog.text }}\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"dialog.open = !dialog.open\"\n                >OK</v-btn\n              >\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n\n        <!-- 编辑班级信息 -->\n        <v-dialog v-model=\"editClassDialog\" max-width=\"450px\">\n          <v-card>\n            <v-card-title>编辑班级信息</v-card-title>\n            <v-card-text>\n              <v-text-field\n                label=\"班级名称\"\n                v-model=\"class_edit.class_name\"\n                outlined\n              ></v-text-field>\n              <v-text-field\n                label=\"班级代码\"\n                v-model=\"class_edit.class_code\"\n                outlined\n              ></v-text-field>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"editClassDialog = !editClassDialog\"\n                >取消</v-btn\n              >\n              <v-btn color=\"blue darken-1\" text @click=\"save_class\">保存</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n\n        <!-- 加载框 -->\n        <v-dialog v-model=\"loading_dialog\" hide-overlay persistent width=\"300\">\n          <v-card color=\"white\" dark>\n            <v-card-text class=\"mt-1 primary--text\">\n              加载中\n              <v-progress-linear\n                indeterminate\n                color=\"primary\"\n                class=\"mb-0\"\n              ></v-progress-linear>\n            </v-card-text>\n          </v-card>\n        </v-dialog>\n\n        <!-- 活动列表 -->\n        <v-dialog\n          v-model=\"act_list_dialog\"\n          fullscreen\n          hide-overlay\n          transition=\"dialog-bottom-transition\"\n        >\n          <v-card>\n            <v-toolbar color=\"cyan\" dark flat>\n              <v-btn icon dark @click=\"act_list_dialog = false\">\n                <v-icon>mdi-close</v-icon>\n              </v-btn>\n              <v-toolbar-title>活动管理</v-toolbar-title>\n              <v-spacer></v-spacer>\n              <v-btn depressed color=\"cyan darken-2\" @click=\"new_act\">\n                新建活动\n              </v-btn>\n              <template v-slot:extension>\n\n                <v-tabs v-model=\"act_list_tab\" align-with-title>\n                  <v-tabs-slider color=\"yellow\"></v-tabs-slider>\n                  <v-tab>\n                    <v-badge color=\"pink\" dot v-if=\"act_list.active_num != 0\">\n                      当前活动\n                    </v-badge>\n                    {{ act_list.active_num == 0 ? \"当前活动\" : \"\" }}\n                  </v-tab>\n                  <v-tab> 历史活动 </v-tab>\n                  <v-tab>\n                    <v-badge color=\"blue\" dot v-if=\"act_list.waiting_num != 0\">\n                      预约开启活动\n                    </v-badge>\n                    {{ act_list.waiting_num == 0 ? \"预约开启活动\" : \"\" }}\n                  </v-tab>\n\n                  <v-tab-item>\n                    <v-card>\n                      <v-container>\n                        <!-- 当前活动 -->\n                        <v-list three-line>\n                          <template\n                            v-for=\"(item, index) in act_list.active_list\"\n                          >\n                            <v-list-item :key=\"index\">\n                              <v-list-item-avatar>\n                                <v-icon>mdi-calendar-cursor</v-icon>\n                              </v-list-item-avatar>\n                              <v-list-item-content>\n                                <v-list-item-title>{{\n                                  item.name\n                                }}</v-list-item-title>\n                                <v-list-item-subtitle\n                                  >创建时间{{\n                                    item.begin_time\n                                  }}</v-list-item-subtitle\n                                >\n                                <v-list-item-subtitle\n                                  >截止时间{{\n                                    item.end_time\n                                  }}</v-list-item-subtitle\n                                >\n                              </v-list-item-content>\n                              <v-list-item-action>\n                                <v-btn depressed @click=\"edit_act(item)\">\n                                  编辑\n                                </v-btn>\n                              </v-list-item-action>\n                              <v-list-item-action>\n                                <v-btn depressed @click=\"get_sts(item)\">\n                                  数据\n                                  <v-icon v-if=\"item.type == 1\" small right\n                                    >mdi-cloud-check-outline</v-icon\n                                  >\n                                </v-btn>\n                                <v-list-item-action-text class=\"text-center\"\n                                  >创建人:{{\n                                    item.create_by\n                                  }}</v-list-item-action-text\n                                >\n                              </v-list-item-action>\n                            </v-list-item>\n                          </template>\n                        </v-list>\n                        <!-- 当前活动 -->\n                      </v-container>\n                    </v-card>\n                  </v-tab-item>\n\n                  <v-tab-item>\n                    <v-card>\n                      <!-- 历史活动 -->\n                      <v-list three-line>\n                        <template\n                          v-for=\"(item, index) in act_list.history_list\"\n                        >\n                          <v-list-item :key=\"index\">\n                            <v-list-item-avatar>\n                              <v-icon>mdi-calendar-lock</v-icon>\n                            </v-list-item-avatar>\n                            <v-list-item-content>\n                              <v-list-item-title\n                                v-html=\"item.name\"\n                              ></v-list-item-title>\n                              <v-list-item-subtitle\n                                >创建时间{{\n                                  item.begin_time\n                                }}</v-list-item-subtitle\n                              >\n                              <v-list-item-subtitle\n                                >截止时间{{\n                                  item.end_time\n                                }}</v-list-item-subtitle\n                              >\n                            </v-list-item-content>\n                            <v-list-item-action>\n                              <v-btn depressed @click=\"edit_act(item)\">\n                                编辑\n                              </v-btn>\n                            </v-list-item-action>\n                            <v-list-item-action>\n                              <v-btn depressed @click=\"get_sts(item)\">\n                                数据\n                                <v-icon v-if=\"item.type == 1\" small right\n                                  >mdi-cloud-check-outline</v-icon\n                                >\n                              </v-btn>\n                              <v-list-item-action-text class=\"text-center\"\n                                >创建人:{{\n                                  item.create_by\n                                }}</v-list-item-action-text\n                              >\n                            </v-list-item-action>\n                          </v-list-item>\n                        </template>\n                      </v-list>\n                      <!-- 历史活动 -->\n                    </v-card>\n                  </v-tab-item>\n\n                  <v-tab-item>\n                    <v-card>\n                      <v-container>\n                        <!-- 预约开启活动 -->\n                        <v-list three-line>\n                          <template\n                            v-for=\"(item, index) in act_list.waiting_list\"\n                          >\n                            <v-list-item :key=\"index\">\n                              <v-list-item-avatar>\n                                <v-icon>mdi-calendar-cursor</v-icon>\n                              </v-list-item-avatar>\n                              <v-list-item-content>\n                                <v-list-item-title>{{\n                                  item.name\n                                }}</v-list-item-title>\n                                <v-list-item-subtitle\n                                  >计划于{{\n                                    item.begin_time\n                                  }}开启</v-list-item-subtitle\n                                >\n                              </v-list-item-content>\n                              <v-list-item-action>\n                                <v-btn depressed @click=\"edit_act(item)\">\n                                  编辑\n                                </v-btn>\n                              </v-list-item-action>\n                              <v-list-item-action>\n                                <v-btn depressed @click=\"get_sts(item)\">\n                                  数据\n                                  <v-icon v-if=\"item.type == 1\" small right\n                                    >mdi-cloud-check-outline</v-icon\n                                  >\n                                </v-btn>\n                                <v-list-item-action-text class=\"text-center\"\n                                  >创建人:{{\n                                    item.create_by\n                                  }}</v-list-item-action-text\n                                >\n                              </v-list-item-action>\n                            </v-list-item>\n                          </template>\n                        </v-list>\n                        <!-- 预约开启活动 -->\n                      </v-container>\n                    </v-card>\n                  </v-tab-item>\n                </v-tabs>\n              </template>\n            </v-toolbar>\n          </v-card>\n        </v-dialog>\n\n        <!-- 编辑活动信息 -->\n        <v-dialog\n          v-model=\"act_dialog\"\n          fullscreen\n          hide-overlay\n          transition=\"dialog-bottom-transition\"\n        >\n          <v-card>\n            <v-toolbar dark color=\"primary\">\n              <v-btn icon dark @click=\"act_dialog = false\">\n                <v-icon>mdi-close</v-icon>\n              </v-btn>\n              <v-toolbar-title>{{\n                act_edit_mode == \"new\" ? \"🌟新建活动\" : \"📝编辑当前活动\"\n              }}</v-toolbar-title>\n              <v-spacer></v-spacer>\n\n              <v-toolbar-items>\n                <v-btn dark text @click=\"save_act\"> 保存 </v-btn>\n              </v-toolbar-items>\n            </v-toolbar>\n\n            <!-- 编辑区开始 -->\n            <v-container>\n              <v-alert\n                dense\n                type=\"info\"\n                icon=\"mdi-folder-plus-outline\"\n                v-if=\"act_edit_mode == 'new'\"\n                class=\"mt-2 mb-4\"\n              >\n                请正确填写结束日期，活动状态会在到期后自动变更。\n                <br />\n                建议管理员为每一个活动都选择不同的配图，便于区分。\n                <br />\n                保存之后，活动即开始，系统将向班级内每一位同学发送通知。\n              </v-alert>\n              <v-alert\n                dense\n                color=\"#2A3B4D\"\n                dark\n                icon=\"mdi-calendar-edit\"\n                v-if=\"act_edit_mode == 'edit'\"\n                class=\"mt-2 mb-4\"\n              >\n                若您提前关闭此活动，我们将自动为您设置结束时间。\n              </v-alert>\n\n              <v-text-field\n                label=\"活动名称\"\n                v-model=\"act_info.name\"\n                :rules=\"name_rule\"\n                hint=\"建议不要与过去的重复，可以是:第x周xxxx\"\n                outlined\n              ></v-text-field>\n\n              <v-switch\n                v-model=\"act_active\"\n                v-if=\"act_edit_mode == 'edit'\"\n                inset\n                label=\"活动状态\"\n                class=\"my-0\"\n              ></v-switch>\n\n              <v-switch\n                v-model=\"need_wait\"\n                inset\n                label=\"是否定时开启\"\n                class=\"my-0\"\n              ></v-switch>\n\n              <!-- 开启时间选择 -->\n              <v-menu\n                ref=\"begin_date_menu\"\n                v-model=\"date_time_menu.begin_date_menu\"\n                v-if=\"need_wait\"\n                :close-on-content-click=\"false\"\n                :return-value.sync=\"act_info.begin_time.d\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"act_info.begin_time.d\"\n                    label=\"选择活动计划开启日期\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"act_info.begin_time.d\"\n                  no-title\n                  scrollable\n                >\n                  <v-spacer></v-spacer>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"date_time_menu.begin_date_menu = false\"\n                  >\n                    Cancel\n                  </v-btn>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"$refs.begin_date_menu.save(act_info.begin_time.d)\"\n                  >\n                    OK\n                  </v-btn>\n                </v-date-picker>\n              </v-menu>\n              <v-menu\n                ref=\"begin_time_menu\"\n                v-model=\"date_time_menu.begin_time_menu\"\n                v-if=\"need_wait\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                :return-value.sync=\"act_info.begin_time.t\"\n                transition=\"scale-transition\"\n                offset-y\n                max-width=\"290px\"\n                min-width=\"290px\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"act_info.begin_time.t\"\n                    label=\"活动计划开启时间(24小时制)\"\n                    prepend-icon=\"mdi-clock-time-four-outline\"\n                    readonly\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-time-picker\n                  v-if=\"date_time_menu.begin_time_menu\"\n                  v-model=\"act_info.begin_time.t\"\n                  format=\"24hr\"\n                  full-width\n                  @click:minute=\"$refs.begin_time_menu.save(act_info.begin_time.t)\"\n                ></v-time-picker>\n              </v-menu>\n              <!-- 开启时间选择 -->\n\n              <v-switch\n                v-model=\"act_info.daily_notify\"\n                inset\n                label=\"是否启用每日提醒\"\n                class=\"my-0\"\n              ></v-switch>\n\n              <v-textarea\n                label=\"活动公告\"\n                v-model=\"act_info.announcement\"\n                :rules=\"announcement_rule\"\n                outlined\n              ></v-textarea>\n\n              <v-text-field\n                label=\"完成签到提示语\"\n                v-model=\"act_info.cheer_text\"\n                :rules=\"cheerText_rule\"\n                outlined\n              ></v-text-field>\n\n              <div class=\"text-overline\">头图设置</div>\n              <div class=\"text-body-1 mb-3\">\n                我们允许您个性化设置签到卡片的背景图片，如果您要使用默认图片的话，下方输入框请\n                <code>留空</code>。\n                <br />\n                如果需要自定义图片，请前往<a\n                  href=\"https://sm.ms\"\n                  target=\"_blank\"\n                  >SM.MS</a\n                >上传图片，在下方填入图片的地址，保存后将自动转换为加密地址。\n                <br />\n                使用「随机图片」功能系统将从Pixiv随机抓取图片，下方将自动填入\"预览地址\"，保存活动后图片地址将转为加密\"永久地址\"，图片有效期90天。\n              </div>\n\n              <div class=\"d-flex flex-wrap\">\n                <v-text-field\n                  label=\"头图地址\"\n                  v-model=\"act_info.pic\"\n                  outlined\n                ></v-text-field>\n                <v-btn\n                  depressed\n                  large\n                  :loading=\"get_rd_pic_btn_loading\"\n                  @click=\"get_random_pic\"\n                  class=\"ma-3\"\n                  >随机图片</v-btn\n                >\n              </div>\n\n              <!-- 预览 -->\n              <v-container>\n                <v-card class=\"mx-auto\" max-width=\"450\">\n                  <v-img\n                    class=\"white--text align-end\"\n                    height=\"200px\"\n                    :src=\"img_preview\"\n                    gradient=\"to top right, rgba(0,0,0,.7), rgba(240,255,255,.3)\"\n                  >\n                    <v-card-title class=\"font-weight-black\">\n                      {{ act_info.name }}\n                    </v-card-title>\n                    <v-card-subtitle class=\"text-caption\">\n                      还有xxx等x名同学未完成\n                    </v-card-subtitle>\n                  </v-img>\n\n                  <v-card-subtitle class=\"pb-0\"> 预览卡片 </v-card-subtitle>\n\n                  <v-card-text class=\"text--primary pt-5\">\n                    <div>{{ act_info.announcement }}</div>\n                  </v-card-text>\n\n                  <v-card-actions>\n                    <v-btn color=\"orange\" large text>\n                      签到\n                      <v-icon right dark v-if=\"act_info.upload.enabled\">\n                        mdi-cloud-upload\n                      </v-icon>\n                    </v-btn>\n                    <v-btn color=\"primary\" large text> 完成情况 </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </v-container>\n              <!-- 预览结束 -->\n\n              <!-- 上传设置 -->\n              <v-card v-if=\"act_edit_mode == 'new'\" class=\"my-3\">\n                <v-card-title>文件上传设置</v-card-title>\n                <v-card-subtitle>\n                  系统默认会将用户上传的文件名改为用户的姓名，如果需要保留原文件名，请关闭“上传后重新命名”开关。\n                  <br />\n                  用户上传的文件将在服务器存储30天，过期删除，请管理员及时导出。\n                  <br />\n                  活动一旦发布将无法更改下列设置!\n                </v-card-subtitle>\n                <v-card-text>\n                  <v-switch\n                    v-model=\"act_info.upload.enabled\"\n                    inset\n                    label=\"是否需要上传文件\"\n                  ></v-switch>\n                </v-card-text>\n                <v-card-text v-if=\"act_info.upload.enabled\">\n                  <div class=\"text-subtitle-2\">文件类型(可多选)：</div>\n                  <v-row>\n                    <v-col cols=\"12\" class=\"d-flex justify-start flex-wrap\">\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"图片文件(png,jpg)\"\n                        value=\"image\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"压缩包(zip,rar)\"\n                        value=\"archive\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"Word文档(doc,docx)\"\n                        value=\"word\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"PowerPoint演示文档(ppt,pptx)\"\n                        value=\"ppt\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"Excel表格(xls,xlsx)\"\n                        value=\"excel\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                      <v-checkbox\n                        v-model=\"act_info.upload.type\"\n                        label=\"PDF文档(pdf)\"\n                        value=\"pdf\"\n                        class=\"ma-2\"\n                      ></v-checkbox>\n                    </v-col>\n                  </v-row>\n\n                  <v-slider\n                    v-model=\"act_info.upload.max_size\"\n                    label=\"单个文件大小不超过(MB)\"\n                    thumb-color=\"green lighten-1\"\n                    thumb-label=\"always\"\n                    max=\"100\"\n                    min=\"1\"\n                  ></v-slider>\n                  <v-switch\n                    v-model=\"act_info.upload.rename\"\n                    inset\n                    label=\"上传后重新命名\"\n                    class=\"my-0\"\n                  ></v-switch>\n                </v-card-text>\n              </v-card>\n              <v-card\n                v-if=\"\n                  act_edit_mode == 'edit' && act_info.upload.enabled == true\n                \"\n                class=\"my-3\"\n              >\n                <v-card-title>文件上传设置浏览</v-card-title>\n                <v-card-text>\n                  <v-row class=\"d-flex flex-wrap\">\n                    <v-col\n                      ><div class=\"text-subtitle-2\">文件类型：</div>\n                      <v-chip\n                        v-for=\"(item, i) in act_info.upload.type\"\n                        :key=\"i\"\n                        class=\"ma-2\"\n                        label\n                        >{{ item }}</v-chip\n                      ></v-col\n                    >\n                    <v-col\n                      ><div class=\"text-subtitle-2\">大小限制：</div>\n                      <v-chip label class=\"ma-2\"\n                        >{{ act_info.upload.max_size }} MB</v-chip\n                      ></v-col\n                    >\n                    <v-col\n                      ><div class=\"text-subtitle-2\">上传后是否重新命名：</div>\n                      <v-chip label class=\"ma-2\">{{\n                        act_info.upload.rename\n                      }}</v-chip></v-col\n                    >\n                  </v-row>\n                </v-card-text>\n              </v-card>\n              <!-- 上传设置结束 -->\n\n              <!-- 结束时间选择 -->\n              <v-menu\n                ref=\"end_date_menu\"\n                v-model=\"date_time_menu.end_date_menu\"\n                :close-on-content-click=\"false\"\n                :return-value.sync=\"act_info.end_time.d\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"act_info.end_time.d\"\n                    label=\"选择活动结束日期\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"act_info.end_time.d\"\n                  no-title\n                  scrollable\n                >\n                  <v-spacer></v-spacer>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"date_time_menu.end_date_menu = false\"\n                  >\n                    Cancel\n                  </v-btn>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"$refs.end_date_menu.save(act_info.end_time.d)\"\n                  >\n                    OK\n                  </v-btn>\n                </v-date-picker>\n              </v-menu>\n              <v-menu\n                ref=\"end_time_menu\"\n                v-model=\"date_time_menu.end_time_menu\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                :return-value.sync=\"act_info.end_time.t\"\n                transition=\"scale-transition\"\n                offset-y\n                max-width=\"290px\"\n                min-width=\"290px\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"act_info.end_time.t\"\n                    label=\"活动结束时间(24小时制)\"\n                    prepend-icon=\"mdi-clock-time-four-outline\"\n                    readonly\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-time-picker\n                  v-if=\"date_time_menu.end_time_menu\"\n                  v-model=\"act_info.end_time.t\"\n                  format=\"24hr\"\n                  full-width\n                  @click:minute=\"$refs.end_time_menu.save(act_info.end_time.t)\"\n                ></v-time-picker>\n              </v-menu>\n              <!-- 结束时间选择 -->\n\n              <small>完成编辑后记得点击右上角的“保存”按钮</small>\n            </v-container>\n            <!-- 结束时间选择 -->\n\n            <!-- 编辑区结束 -->\n          </v-card>\n        </v-dialog>\n\n        <!-- 活动统计数据 sts_dialog -->\n        <v-dialog\n          v-model=\"sts_dialog\"\n          fullscreen\n          hide-overlay\n          transition=\"dialog-bottom-transition\"\n        >\n          <v-card>\n            <v-toolbar dark color=\"info\">\n              <v-btn icon dark @click=\"sts_dialog = false\">\n                <v-icon>mdi-close</v-icon>\n              </v-btn>\n              <v-toolbar-title>活动统计数据</v-toolbar-title>\n              <v-spacer></v-spacer>\n            </v-toolbar>\n            <div class=\"pa-4\">\n              <div class=\"text-caption\">数据统计刷新存在0~10s延迟。</div>\n              <div class=\"text-caption\" v-if=\"export_data.act_id != 0\">\n                当前活动已开启文件上传功能。<br />点击“已完成”用户列表项可查看用户上传的文件。<br />点击“导出所有文件”可将用户上传的文件打包下载。\n              </div>\n            </div>\n            <v-card class=\"ma-2\">\n              <v-card-text v-if=\"export_data.act_id != 0\">\n                <v-btn\n                  depressed\n                  @click=\"export_file\"\n                  v-if=\"export_data.url == ''\"\n                  :loading=\"export_data.loading\"\n                  class=\"ma-3\"\n                >\n                  导出所有文件\n                </v-btn>\n                <v-btn\n                  depressed\n                  color=\"primary\"\n                  target=\"_blank\"\n                  :href=\"export_data.url\"\n                  v-if=\"export_data.url != ''\"\n                  class=\"ma-3\"\n                >\n                  下载\n                </v-btn>\n                <small v-if=\"export_data.url != ''\"\n                  >下载链接有效期为5分钟。</small\n                >\n              </v-card-text>\n              <v-list dense class=\"pa-2\">\n                <v-subheader>未完成</v-subheader>\n                <v-list-item-group color=\"primary\">\n                  <v-list-item\n                    v-for=\"(item, i) in sts.unfinished_list\"\n                    :key=\"i\"\n                  >\n                    <v-list-item-icon>\n                      <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                      <v-list-item-title\n                        >{{ item.user_name }} (UID:{{\n                          item.user_id\n                        }})</v-list-item-title\n                      >\n                    </v-list-item-content>\n                  </v-list-item>\n                </v-list-item-group>\n\n                <v-divider></v-divider>\n\n                <v-subheader>已完成</v-subheader>\n\n                <!-- 无文件 -->\n                <v-list-item-group\n                  color=\"primary\"\n                  v-if=\"export_data.act_id == 0\"\n                >\n                  <v-list-item v-for=\"(item, i) in sts.finished_list\" :key=\"i\">\n                    <v-list-item-icon>\n                      <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                      <v-list-item-title\n                        >{{ item.user_name }} (UID:{{\n                          item.user_id\n                        }})</v-list-item-title\n                      >\n                      <v-list-item-subtitle\n                        >完成时间:{{ item.date_time }}</v-list-item-subtitle\n                      >\n                    </v-list-item-content>\n                  </v-list-item>\n                </v-list-item-group>\n                <!-- 无文件 -->\n\n                <!-- 有文件预览 -->\n                <v-list-item-group\n                  color=\"primary\"\n                  v-if=\"export_data.act_id != 0\"\n                >\n                  <v-list-item\n                    v-for=\"(item, i) in sts.finished_list\"\n                    :key=\"i\"\n                    @click=\"get_file_preview(item)\"\n                  >\n                    <v-list-item-icon>\n                      <v-icon v-text=\"item.id\"></v-icon>\n                    </v-list-item-icon>\n                    <v-list-item-content>\n                      <v-list-item-title\n                        >{{ item.user_name }} (UID:{{\n                          item.user_id\n                        }})</v-list-item-title\n                      >\n                      <v-list-item-subtitle\n                        >完成时间:{{ item.date_time }}&nbsp;<v-icon small\n                          >mdi-cloud-check-outline</v-icon\n                        ></v-list-item-subtitle\n                      >\n                    </v-list-item-content>\n                  </v-list-item>\n                </v-list-item-group>\n                <!-- 有文件预览 -->\n              </v-list>\n            </v-card>\n          </v-card>\n        </v-dialog>\n\n        <!-- 用户管理 user_dialog -->\n        <v-dialog\n          v-model=\"user_dialog\"\n          fullscreen\n          hide-overlay\n          transition=\"dialog-bottom-transition\"\n        >\n          <v-card class=\"pa-4\">\n            <v-toolbar dark color=\"info\">\n              <v-btn icon dark @click=\"user_dialog = false\">\n                <v-icon>mdi-close</v-icon>\n              </v-btn>\n              <v-toolbar-title>班级成员管理</v-toolbar-title>\n              <v-spacer></v-spacer>\n              <v-btn @click=\"get_user_list\" dark icon\n                ><v-icon>mdi-refresh</v-icon></v-btn\n              >\n            </v-toolbar>\n\n            <v-card-text>\n              <v-alert shaped type=\"info\" class=\"mx-auto ma-4\">\n                【踢出班级】:点击按钮后，将立即清除用户的签到记录及上传的文件，记录无法恢复。用户将重新回到“初始化”阶段。谨慎操作！<br />\n                【设为/撤销管理员】: 操作成功后该用户需要重新登录才能生效。\n              </v-alert>\n              <v-card class=\"mx-auto ma-4\">\n                <v-card-title>\n                  所有班级成员\n                  <v-spacer></v-spacer>\n                  <v-text-field\n                    v-model=\"userlist_search\"\n                    append-icon=\"mdi-magnify\"\n                    label=\"搜索\"\n                    single-line\n                    hide-details\n                  ></v-text-field>\n                </v-card-title>\n                <v-card-text>\n                  <v-data-table\n                    :headers=\"userlist_headers\"\n                    :items=\"user_list\"\n                    :search=\"userlist_search\"\n                  >\n                    <template v-slot:[`item.is_admin`]=\"{ item }\">\n                      <v-icon v-if=\"item.admin == 1\" color=\"purple\"\n                        >mdi-check-circle-outline</v-icon\n                      >\n                      <v-icon v-if=\"item.admin == 0\"\n                        >mdi-close-circle-outline</v-icon\n                      >\n                    </template>\n                    <template v-slot:[`item.actions`]=\"{ item }\">\n                      <v-btn\n                        depressed\n                        small\n                        class=\"ma-2\"\n                        v-if=\"item.admin == 0\"\n                        color=\"primary\"\n                        @click=\"set_admin(item, 1)\"\n                        >设为管理员</v-btn\n                      >\n                      <v-btn\n                        depressed\n                        small\n                        class=\"ma-2\"\n                        v-if=\"item.admin == 1\"\n                        @click=\"set_admin(item, 0)\"\n                        >撤销管理员</v-btn\n                      >\n\n                      <v-btn\n                        depressed\n                        small\n                        class=\"ma-2\"\n                        @click=\"confirn_delete(item)\"\n                        color=\"error\"\n                        >踢出班级</v-btn\n                      >\n                    </template>\n                  </v-data-table>\n                </v-card-text>\n              </v-card>\n            </v-card-text>\n          </v-card>\n        </v-dialog>\n\n        <!-- 删除用户 dialogDelete -->\n        <v-dialog v-model=\"dialogDelete.open\" max-width=\"500px\">\n          <v-card>\n            <v-card-title class=\"text-h5\">确定要删除该用户?</v-card-title>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"dialogDelete.open = false\"\n                >取消</v-btn\n              >\n              <v-btn color=\"blue darken-1\" text @click=\"op_user\">OK</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n\n        <!-- 文件预览 -->\n        <v-dialog\n          v-model=\"upload_preview.open\"\n          max-width=\"500px\"\n          v-if=\"upload_preview.open == true\"\n        >\n          <v-card>\n            <v-card-title class=\"text-h5\">用户文件预览</v-card-title>\n            <v-card-text v-if=\"upload_preview.item.type == 'image'\">\n              <!-- 图片展示 -->\n              <v-img\n                max-width=\"400\"\n                class=\"ma-auto\"\n                :src=\"upload_preview.item.img_url\"\n              >\n                <template v-slot:placeholder>\n                  <v-row\n                    class=\"fill-height ma-0\"\n                    align=\"center\"\n                    justify=\"center\"\n                  >\n                    <v-progress-circular\n                      indeterminate\n                      color=\"blue\"\n                    ></v-progress-circular>\n                  </v-row>\n                </template>\n              </v-img>\n            </v-card-text>\n            <v-card-text v-if=\"upload_preview.item.type == 'other'\">\n              <!-- 下载 -->\n              <v-btn\n                depressed\n                :href=\"upload_preview.item.download_url\"\n                target=\"_blank\"\n                >下载</v-btn\n              >\n            </v-card-text>\n            <v-card-text> 图片/文件下载临时地址有效期为5分钟。 </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"upload_preview.open = false\"\n                right\n                >关闭</v-btn\n              >\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-main>\n    </v-app>\n  </div>\n</template>\n\n<script>\nconst backEndUrl = process.env.VUE_APP_API_URL;\nimport nProgress from \"nprogress\";\nexport default {\n  name: \"AdminIndex\",\n  data() {\n    return {\n      announcement_rule: [(v) => v.length <= 50 || \"字数不能超过50\"],\n      name_rule: [(v) => v.length <= 40 || \"字数不能超过40\"],\n      cheerText_rule: [(v) => v.length <= 20 || \"字数不能超过20\"],\n      dialog: {\n        open: false,\n        title: \"\",\n        text: \"\",\n      },\n      act_list: {\n        active_num: 0,\n        active_list: [],\n        history_list: [],\n        waiting_list: [],\n        waiting_num:0,\n      },\n      class_info: {\n        class_name: \"\",\n        class_code: \"\",\n        total: 0,\n        act_id: \"\",\n        act_name: \"\",\n      },\n      class_edit: {\n        class_name: \"\",\n        class_code: \"\",\n      },\n      act_dialog: false,\n      editClassDialog: false,\n      act_list_dialog: false,\n      loading_dialog: false,\n      sts_dialog: false,\n      user_dialog: false,\n      editUserDialog: false,\n      dialogDelete: {\n        item: null,\n        open: false,\n      },\n      act_list_tab: 0,\n      act_info: {\n        name: \"\",\n        active: false,\n        daily_notify: true,\n        pic: \"\",\n        announcement: \"\",\n        cheer_text: \"\",\n        need_wait: false,\n        begin_time: {\n          d: \"\",\n          t: \"\",\n        },\n        end_time: {\n          d: \"\",\n          t: \"\",\n        },\n        upload: {\n          enabled: false,\n          type: [],\n          max_size: 5,\n          rename: true,\n        },\n      },\n      need_wait:false,\n      act_active:false,\n      sts: {\n        done: 0,\n        total: 0,\n        unfinished_list: [],\n        finished_list: [],\n      },\n      act_edit_mode: \"edit\",\n      date_time_menu: {\n        begin_date_menu: false,\n        begin_time_menu: false,\n        end_date_menu: false,\n        end_time_menu: false,\n      },\n      csrfHeader: {},\n      user_list: [],\n      userlist_search: \"\",\n      userlist_headers: [\n        {\n          text: \"序号\",\n          align: \"start\",\n          value: \"id\",\n        },\n        { text: \"姓名\", value: \"name\" },\n        { text: \"邮箱\", value: \"email\" },\n        { text: \"通知方式\", value: \"noti_type\" },\n        { text: \"是否为管理员\", value: \"is_admin\", sortable: false },\n        { text: \"操作\", value: \"actions\", sortable: false },\n      ],\n      export_data: {\n        act_id: 0,\n        loading: false,\n        url: \"\",\n      },\n      upload_preview: {\n        open: false,\n        item: null,\n      },\n      get_rd_pic_btn_loading: false,\n    };\n  },\n  mounted: function () {\n    //获取csrf-token\n    if (this.$cookies.get(\"CSRF-TOKEN\") == null) {\n      this.$router.push({\n        path: \"/error/csrf-token获取失败，请换个浏览器登录\",\n      });\n      return;\n    } else {\n      this.csrfHeader = { \"X-CSRF-TOKEN\": this.$cookies.get(\"CSRF-TOKEN\") };\n    }\n\n    //获取班级信息\n    this.initClass();\n  },\n  methods: {\n    initClass: function () {\n      let _this = this;\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/class/info\",\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.class_info = res.data.data;\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          _this.error(error);\n        });\n    },\n    get_random_pic: function () {\n      let _this = this;\n      this.get_rd_pic_btn_loading = true;\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/act/getRandomPic\",\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.act_info.pic = res.data.data.url;\n          } else {\n            _this.error(res.data.msg);\n          }\n          _this.get_rd_pic_btn_loading = false;\n        })\n        .catch(function (error) {\n          _this.error(error);\n          _this.get_rd_pic_btn_loading = false;\n        });\n    },\n    edit_act: function (act_item) {\n      //获取要编辑的活动信息\n      let _this = this;\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/act/info\",\n        params: {\n          act_id: act_item.act_id,\n        },\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.act_info = res.data.data;\n            _this.act_active = _this.act_info.active;\n            _this.need_wait = _this.act_info.need_wait;\n            _this.act_dialog = true;\n            _this.act_edit_mode = \"edit\";\n            console.log(_this.act_info);\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          _this.error(error);\n        });\n    },\n    new_act: function () {\n      this.act_info.name = \"\";\n      this.act_info.active = true;\n      this.act_info.daily_notify = true;\n      this.act_info.announcement = \"\";\n      this.act_info.pic = \"\";\n      this.act_info.cheer_text = \"恭喜完成\";\n      this.act_info.begin_time.d = this.today_date;\n      this.act_info.begin_time.t = \"00:00\";\n      this.act_info.end_time.d = this.today_date;\n      this.act_info.end_time.t = \"00:00\";\n      this.act_info.upload.enabled = false;\n      this.act_info.upload.max_size = 5;\n      this.act_info.upload.rename = true;\n      this.act_info.upload.type = [];\n\n      this.act_dialog = true;\n      this.act_edit_mode = \"new\";\n      this.get_random_pic();\n    },\n    edit_class: function () {\n      this.editClassDialog = true;\n      this.class_edit.class_name = this.class_info.class_name;\n      this.class_edit.class_code = this.class_info.class_code;\n    },\n    show_act_list: function () {\n      let _this = this;\n      this.loading_dialog = true;\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/act/list\",\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.act_list = res.data.data;\n            _this.loading_dialog = false;\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          _this.error(error);\n        });\n      _this.act_list_dialog = true;\n    },\n    save_class: function () {\n      let _this = this;\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + \"/api/admin/class/edit\",\n        headers: _this.csrfHeader,\n        data: _this.class_edit,\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.success(\"保存成功\");\n            _this.editClassDialog = false;\n            _this.initClass();\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          _this.error(error);\n        });\n    },\n    save_act: function () {\n      nProgress.start();\n      let apiUrl = \"\";\n      let _this = this;\n      if (this.act_edit_mode == \"new\") {\n        apiUrl = \"/api/admin/act/new\";\n      } else if (this.act_edit_mode == \"edit\") {\n        apiUrl = \"/api/admin/act/edit\";\n      }\n\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + apiUrl,\n        headers: _this.csrfHeader,\n        data: _this.act_info,\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.success(\"保存成功\");\n            _this.act_dialog = false;\n            _this.show_act_list();\n          } else {\n            _this.error(res.data.msg);\n          }\n          nProgress.done();\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n          nProgress.done();\n        });\n    },\n    get_sts: function (info_item) {\n      let _this = this;\n      //获取统计数据\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/act/statistic\",\n        params: {\n          act_id: info_item.act_id,\n        },\n      })\n        .then(function (res) {\n          // 处理成功情况\n          if (res.data.status == 0) {\n            _this.sts.done = res.data.data.done;\n            _this.sts.total = res.data.data.total;\n            _this.sts.unfinished_list = res.data.data.unfinished_list;\n            _this.sts.finished_list = res.data.data.finished_list;\n\n            if (info_item.type == 1) {\n              _this.export_data.act_id = info_item.act_id;\n            } else {\n              _this.export_data.act_id = 0;\n            }\n            _this.export_data.url = \"\";\n\n            _this.sts_dialog = true;\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    show_user_list: function () {\n      let _this = this;\n      nProgress.start();\n      //获取用户\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/user/list\",\n      })\n        .then(function (res) {\n          // 处理成功情况\n          if (res.data.status == 0) {\n            _this.user_list = res.data.data.data;\n            _this.user_dialog = true;\n          } else {\n            _this.error(res.data.msg);\n          }\n          nProgress.done();\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    get_user_list: function () {\n      let _this = this;\n      nProgress.start();\n      //获取用户\n      this.axios({\n        method: \"get\",\n        url: backEndUrl + \"/api/admin/user/list\",\n      })\n        .then(function (res) {\n          // 处理成功情况\n          if (res.data.status == 0) {\n            _this.user_list = res.data.data.data;\n          } else {\n            _this.error(res.data.msg);\n          }\n          nProgress.done();\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    op_user: function () {\n      let _this = this;\n\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + \"/api/admin/user/del\",\n        headers: _this.csrfHeader,\n        data: {\n          user_id: _this.dialogDelete.item.user_id,\n          sign: _this.dialogDelete.item.sign,\n        },\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.success(\"操作成功\");\n          } else {\n            _this.error(res.data.msg);\n          }\n          _this.dialogDelete.open = false;\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    set_admin: function (item, set_to) {\n      let _this = this;\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + \"/api/admin/user/setAdmin\",\n        headers: _this.csrfHeader,\n        data: {\n          user_id: item.user_id,\n          set_to: set_to,\n          sign: item.sign,\n        },\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.success(\"操作成功\");\n            _this.get_user_list();\n          } else {\n            _this.error(res.data.msg);\n          }\n          _this.dialogDelete.open = false;\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    confirn_delete: function (item) {\n      this.dialogDelete.item = item;\n      this.dialogDelete.open = true;\n    },\n    export_file: function () {\n      let _this = this;\n      this.export_data.loading = true;\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + \"/api/admin/act/export\",\n        headers: _this.csrfHeader,\n        data: {\n          act_id: _this.export_data.act_id,\n        },\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.export_data.url = res.data.data.download_url;\n          } else {\n            _this.error(res.data.msg);\n          }\n          _this.export_data.loading = false;\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    get_file_preview: function (sts_item) {\n      let _this = this;\n      this.axios({\n        method: \"post\",\n        url: backEndUrl + \"/api/admin/act/viewFile\",\n        headers: _this.csrfHeader,\n        data: {\n          act_id: _this.export_data.act_id,\n          user_id: sts_item.user_id,\n        },\n      })\n        .then(function (res) {\n          if (res.data.status == 0) {\n            _this.upload_preview.item = res.data.data;\n            _this.upload_preview.open = true;\n          } else {\n            _this.error(res.data.msg);\n          }\n        })\n        .catch(function (error) {\n          // 处理错误情况\n          _this.error(error);\n        });\n    },\n    success: function (text) {\n      this.dialog.open = true;\n      this.dialog.title = \"成功\";\n      this.dialog.text = text;\n    },\n    error: function (text) {\n      this.dialog.open = true;\n      this.dialog.title = \"失败\";\n      this.dialog.text = text;\n    },\n  },\n  computed: {\n    img_preview: function () {\n      if (this.act_info.pic == \"\") {\n        return \"/static/image/default.jpg\";\n      } else {\n        return this.act_info.pic;\n      }\n    },\n    today_date: function () {\n      var date = new Date();\n      var myyear = date.getFullYear();\n      var mymonth = date.getMonth() + 1;\n      var myweekday = date.getDate();\n      if (mymonth < 10) {\n        mymonth = \"0\" + mymonth;\n      }\n      if (myweekday < 10) {\n        myweekday = \"0\" + myweekday;\n      }\n      return myyear + \"-\" + mymonth + \"-\" + myweekday;\n    },\n  },\n  watch:{\n    need_wait:function(n){\n        this.act_info.need_wait = n;\n        if(n==true){\n            this.act_active = false;\n        }\n    },\n    act_active:function(n){\n        this.act_info.active = n;\n        if(n==true){\n          this.need_wait = !n;\n        }\n    }\n  }\n};\n</script>\n\n<style></style>\n"]}]}