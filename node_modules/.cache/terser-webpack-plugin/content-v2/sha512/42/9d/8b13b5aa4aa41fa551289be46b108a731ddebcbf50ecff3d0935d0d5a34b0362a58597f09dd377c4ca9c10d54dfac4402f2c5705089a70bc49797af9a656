{"code":"(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],_=0,u=[];_<r.length;_++)o=r[_],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},n={app:0},s=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"/\";var r=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;s.push([0,\"chunk-vendors\"]),a()})({0:function(t,e,a){t.exports=a(\"56d7\")},\"36f8\":function(t,e){},\"3fb9\":function(t,e,a){\"use strict\";var i=a(\"ea16\"),n=a(\"fa37\"),s=(a(\"6e21\"),a(\"2877\")),o=a(\"6544\"),r=a.n(o),c=a(\"8336\"),l=a(\"adda\"),d=Object(s[\"a\"])(n[\"default\"],i[\"a\"],i[\"b\"],!1,null,null,null);e[\"default\"]=d.exports,r()(d,{VBtn:c[\"a\"],VImg:l[\"a\"]})},4793:function(t,e,a){\"use strict\";a(\"fd7d\")},\"4a20\":function(t,e,a){t.exports=a.p+\"img/qiqihutao.1ea6dce8.png\"},\"56d7\":function(t,e,a){\"use strict\";a.r(e);a(\"e260\"),a(\"e6cf\"),a(\"cca6\"),a(\"a79d\");var i=a(\"2b0e\"),n=(a(\"d3b7\"),a(\"bc3a\")),s=a.n(n),o={},r=s.a.create(o);r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},i[\"a\"].use(Plugin);Plugin;var c=a(\"f309\");i[\"a\"].use(c[\"a\"]);var l=new c[\"a\"]({}),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"v-app\",[a(\"router-view\")],1)},_=[],u={name:\"App\",data:function(){return{}}},v=u,m=a(\"2877\"),p=a(\"6544\"),f=a.n(p),h=a(\"7496\"),g=Object(m[\"a\"])(v,d,_,!1,null,null,null),b=g.exports;f()(g,{VApp:h[\"a\"]});var x=a(\"2f62\");i[\"a\"].use(x[\"a\"]);var k=new x[\"a\"].Store({state:{},mutations:{},actions:{},modules:{}}),y=a(\"323e\"),w=a.n(y),C=(a(\"a5d8\"),a(\"8c4f\")),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"user-index\")},$=[],D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"v-app\",[i(\"v-navigation-drawer\",{attrs:{app:\"\"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:\"drawer\"}},[i(\"v-list-item\",[i(\"v-list-item-content\",[i(\"v-list-item-title\",{staticClass:\"text-h6\"},[t._v(\" 功能菜单 \")]),i(\"v-list-item-subtitle\",[t._v(\" 用户面板 \")])],1)],1),i(\"v-divider\"),i(\"v-list\",{attrs:{nav:\"\"}},[i(\"v-list-item-group\",{attrs:{\"active-class\":\"deep-purple--text text--accent-4\"},model:{value:t.group,callback:function(e){t.group=e},expression:\"group\"}},[i(\"v-list-item\",[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-calendar-check\")])],1),i(\"v-list-item-title\",[t._v(\"主页\")])],1),i(\"v-list-item\",[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-calendar-search\")])],1),i(\"v-list-item-title\",[t._v(\"签到记录\")])],1),i(\"v-list-item\",[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-account\")])],1),i(\"v-list-item-title\",[t._v(\"我的\")])],1),i(\"v-divider\"),t.myInfo.is_admin?i(\"v-list-item\",{attrs:{to:\"/admin\",link:\"\"}},[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-account-tie\")])],1),i(\"v-list-item-title\",[t._v(\"管理员面板\")])],1):t._e(),i(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.logout}},[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-logout\")])],1),i(\"v-list-item-title\",[t._v(\"退出登录\")])],1)],1)],1)],1),i(\"v-app-bar\",{attrs:{app:\"\"}},[i(\"v-app-bar-nav-icon\",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),i(\"v-toolbar-title\",[t._v(\"签到系统\")])],1),i(\"v-main\",[0!=t.noti_list.length?i(\"div\",t._l(t.noti_list,(function(e,a){return i(\"v-alert\",{key:a,staticClass:\"mx-auto mt-5\",attrs:{\"max-width\":\"450\",dense:\"\",prominent:\"\",type:e.type,transition:\"scale-transition\"}},[i(\"v-row\",{attrs:{align:\"center\"}},[i(\"v-col\",{staticClass:\"grow\"},[t._v(\" \"+t._s(e.text)+\" \")]),i(\"v-col\",{staticClass:\"shrink\"},[i(\"v-btn\",{attrs:{text:\"\"},on:{click:function(a){return t.noti_check(e)}}},[t._v(\"已阅\")])],1)],1)],1)})),1):t._e(),i(\"v-container\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.group&&0==t.act_info.total,expression:\"group == 0 && act_info.total==0\"}],attrs:{fluid:\"\"}},[i(\"div\",{staticClass:\"mt-6\",attrs:{justify:\"center\",align:\"center\"}},[i(\"v-img\",{staticClass:\"mx-auto\",attrs:{src:a(\"4a20\"),\"max-width\":\"200px\",alt:\"\"}}),i(\"div\",{staticClass:\"text-subtitle-1 grey--text\"},[t._v(\"您的班级此时没有进行中的活动\")])],1)]),i(\"v-container\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.group&&0!=t.act_info.total,expression:\"group == 0 && act_info.total!=0\"}]},t._l(t.act_info.list,(function(e,a){return i(\"v-card\",{key:a,staticClass:\"mx-auto my-5\",attrs:{\"max-width\":\"450\"}},[i(\"v-img\",{staticClass:\"white--text align-end\",attrs:{height:\"200px\",src:e.act_pic,gradient:\"to top right, rgba(0,0,0,.7), rgba(240,255,255,.3)\"}},[i(\"v-card-title\",{staticClass:\"font-weight-black\"},[t._v(\" \"+t._s(e.act_name)+\"  \"),0==e.noti_enabled?i(\"v-icon\",{attrs:{dark:\"\"}},[t._v(\"mdi-bell-off-outline\")]):t._e()],1),i(\"v-card-subtitle\",{staticClass:\"text-caption\"},[t._v(\" \"+t._s(e.statistic.info)+\" \")])],1),i(\"v-card-subtitle\",{staticClass:\"pb-0\"},[t._v(\" \"+t._s(e.end_time)+\" 截止 已完成 \"+t._s(e.statistic.done)+\"/\"+t._s(e.statistic.total)+\" \")]),i(\"v-card-text\",{staticClass:\"text--primary pt-5\"},[i(\"div\",[t._v(t._s(e.act_announcement))])]),i(\"v-card-actions\",[1==e.status?i(\"v-btn\",{attrs:{large:\"\",color:\"error\",plain:\"\"},on:{click:function(a){return t.cancel(e)}}},[t._v(\" 撤销签到 \")]):t._e(),0==e.status?i(\"v-btn\",{attrs:{color:\"orange\",large:\"\",text:\"\"},on:{click:function(a){return t.signin(e)}}},[t._v(\" 签到 \"),1==e.act_type&&0==e.status?i(\"v-icon\",{attrs:{right:\"\",dark:\"\"}},[t._v(\" mdi-cloud-upload \")]):t._e()],1):t._e(),i(\"v-btn\",{attrs:{color:\"primary\",large:\"\",text:\"\"},on:{click:function(a){return t.get_sts(e)}}},[t._v(\" 完成情况 \"),i(\"v-icon\",{attrs:{right:\"\",dark:\"\"}},[t._v(\" mdi-chart-box \")])],1),1==e.act_type&&1==e.status?i(\"v-btn\",{attrs:{color:\"secondary\",large:\"\",text:\"\"},on:{click:function(a){return t.view_upload(e)}}},[t._v(\" 我的文件 \"),i(\"v-icon\",{attrs:{right:\"\",dark:\"\"}},[t._v(\" mdi-cloud-search \")])],1):t._e()],1)],1)})),1),i(\"v-container\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==t.group,expression:\"group == 1\"}]},[i(\"div\",{staticClass:\"pa-5\"},[i(\"div\",{staticClass:\"text-h4 mb-5\"},[t._v(\" 签到活动参与记录 \")]),i(\"div\",{staticClass:\"text-caption\"},[t._v(\" 点击即可查看活动详情。 \")])]),i(\"v-container\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.myActLog.total,expression:\"myActLog.total == 0\"}],attrs:{fluid:\"\"}},[i(\"div\",{staticClass:\"mt-6\",attrs:{justify:\"center\",align:\"center\"}},[i(\"v-img\",{staticClass:\"mx-auto\",attrs:{src:a(\"b3b7\"),\"max-width\":\"200px\",alt:\"\"}}),i(\"div\",{staticClass:\"text-subtitle-1 grey--text\"},[t._v(\"您尚未参与任何签到活动\")])],1)]),0!=t.myActLog.total?i(\"v-list\",{attrs:{\"three-line\":\"\"}},[i(\"v-pagination\",{staticClass:\"pa-3\",attrs:{length:t.myActLog.pages_num},model:{value:t.log_page,callback:function(e){t.log_page=e},expression:\"log_page\"}}),t._l(t.myActLog.list,(function(e,a){return[i(\"v-list-item\",{key:a,on:{click:function(a){return t.view_act_info(e)}}},[i(\"v-list-item-avatar\",[i(\"v-icon\",[t._v(\"mdi-calendar-multiple-check\")])],1),i(\"v-list-item-content\",[i(\"v-list-item-title\",{domProps:{innerHTML:t._s(e.act_name)}}),i(\"v-list-item-subtitle\",[t._v(\"参与时间：\"+t._s(e.date_time))])],1),i(\"v-list-item-action\",[i(\"v-btn\",{attrs:{icon:\"\"}},[i(\"v-icon\",{attrs:{color:\"grey lighten-1\"}},[t._v(\"mdi-information\")])],1)],1)],1)]}))],2):t._e()],1),i(\"v-container\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.group,expression:\"group == 2\"}]},[i(\"v-card\",{staticClass:\"mx-3\"},[i(\"v-parallax\",{staticClass:\"profile_card\",attrs:{dark:\"\",height:\"200px\"}},[i(\"v-app-bar\",{attrs:{flat:\"\",color:\"rgba(0, 0, 0, 0)\"}},[i(\"v-toolbar-title\",{staticClass:\"text-h6 white--text pl-0\"},[t._v(\" 个人信息 \")]),i(\"v-spacer\")],1),i(\"v-card-title\",{staticClass:\"white--text mt-4\"},[i(\"v-avatar\",{attrs:{size:\"56\"}},[i(\"v-icon\",[t._v(\" mdi-account \")])],1),i(\"div\",{staticClass:\"text-h5 ml-3\"},[t._v(\" \"+t._s(t.myInfo.user_name)+\" \")]),i(\"br\")],1),i(\"v-card-subtitle\",[i(\"div\",{staticClass:\"d-flex flex-wrap\"},[i(\"v-chip\",{staticClass:\"mx-2 mb-3\",attrs:{color:\"Default\"}},[t._v(\"UID:\"+t._s(t.myInfo.user_id))]),i(\"v-chip\",{staticClass:\"mx-2 mb-3\",attrs:{color:\"secondary\"}},[t._v(\"Email:\"+t._s(t.myInfo.email))]),i(\"v-chip\",{staticClass:\"mx-2 mb-3\",attrs:{color:\"primary\"}},[t._v(\"班级:\"+t._s(t.myInfo.class_name))]),i(\"v-chip\",{staticClass:\"mx-2 mb-3\",attrs:{color:\"orange\"}},[t._v(\"班级代码:\"+t._s(t.myInfo.class_code))]),t.myInfo.is_admin?i(\"v-chip\",{staticClass:\"mx-2 mb-3 white--text\",attrs:{color:\"red\"}},[t._v(\"管理员\")]):t._e()],1)])],1),i(\"v-list-item-group\",{attrs:{color:\"primary\"}},[i(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.change_noti}},[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-alarm\")])],1),i(\"v-list-item-content\",[i(\"v-list-item-title\",[t._v(\"修改通知方式\")])],1)],1),i(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.bind_wechat}},[i(\"v-list-item-icon\",[i(\"v-icon\",[t._v(\"mdi-wechat\")])],1),i(\"v-list-item-content\",[i(\"v-list-item-title\",[t._v(\"绑定微信账号\")])],1)],1)],1)],1)],1),i(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.dialog.open,callback:function(e){t.$set(t.dialog,\"open\",e)},expression:\"dialog.open\"}},[i(\"v-card\",[i(\"v-card-title\",[t._v(t._s(t.dialog.title))]),i(\"v-card-text\",[t._v(\" \"+t._s(t.dialog.text)+\" \")]),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.dialog.open=!t.dialog.open}}},[t._v(\"OK\")])],1)],1)],1),i(\"v-dialog\",{attrs:{fullscreen:\"\",\"hide-overlay\":\"\",transition:\"dialog-bottom-transition\"},model:{value:t.sts_dialog,callback:function(e){t.sts_dialog=e},expression:\"sts_dialog\"}},[i(\"v-card\",[i(\"v-toolbar\",{attrs:{dark:\"\",color:\"info\"}},[i(\"v-btn\",{attrs:{icon:\"\",dark:\"\"},on:{click:function(e){t.sts_dialog=!1}}},[i(\"v-icon\",[t._v(\"mdi-close\")])],1),i(\"v-toolbar-title\",[t._v(\"活动统计数据\")]),i(\"v-spacer\")],1),i(\"div\",{staticClass:\"pa-4\"},[i(\"div\",{staticClass:\"text-caption\"},[t._v(\" 数据统计刷新存在0~10s延迟。 \")])]),t.sts.total!=t.sts.done?i(\"div\",{staticClass:\"ma-4\",attrs:{justify:\"center\",align:\"center\"}},[i(\"v-img\",{staticClass:\"mx-auto\",attrs:{src:a(\"b3b7\"),\"max-width\":\"200px\",alt:\"\"}}),i(\"div\",{staticClass:\"text-subtitle-1 grey--text\"},[t._v(\"参与率未达标\")])],1):t._e(),i(\"v-card\",{staticClass:\"ma-2\"},[i(\"v-card-text\",[i(\"v-list\",{staticClass:\"pa-2\",attrs:{dense:\"\"}},[i(\"v-subheader\",[t._v(\"未完成\")]),i(\"v-list-item-group\",{attrs:{color:\"primary\"}},t._l(t.sts.unfinished_list,(function(e,a){return i(\"v-list-item\",{key:a},[i(\"v-list-item-icon\",[i(\"v-icon\",{domProps:{textContent:t._s(e.id)}})],1),i(\"v-list-item-content\",[i(\"v-list-item-title\",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1),i(\"v-divider\"),i(\"v-subheader\",[t._v(\"已完成\")]),i(\"v-list-item-group\",{attrs:{color:\"primary\"}},t._l(t.sts.finished_list,(function(e,a){return i(\"v-list-item\",{key:a},[i(\"v-list-item-icon\",[i(\"v-icon\",{domProps:{textContent:t._s(e.id)}})],1),i(\"v-list-item-content\",[i(\"v-list-item-title\",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1)],1)],1)],1)],1)],1),i(\"v-dialog\",{attrs:{persistent:\"\",\"max-width\":\"600px\"},model:{value:t.change_noti_dialog,callback:function(e){t.change_noti_dialog=e},expression:\"change_noti_dialog\"}},[i(\"v-card\",[i(\"v-card-title\",[i(\"span\",{staticClass:\"text-h5\"},[t._v(\"通知方式\")])]),i(\"v-card-text\",[i(\"v-container\",[i(\"div\",{staticClass:\"text-body-1\"},[t._v(\" 若您未完成签到，系统将会在活动有效期内每天中午12:30和下午6:30按照以下所选方式提醒您。 \"),i(\"br\"),t._v(\" 信息内会包含快捷登录系统的链接，请勿泄露哦。 \")]),i(\"v-radio-group\",{attrs:{row:\"\"},model:{value:t.noti_type,callback:function(e){t.noti_type=e},expression:\"noti_type\"}},[i(\"v-radio\",{attrs:{label:\"关闭通知\",value:\"none\"}}),i(\"v-radio\",{attrs:{label:\"邮件通知\",value:\"email\"}}),i(\"v-radio\",{attrs:{label:\"微信通知\",value:\"wechat\"}})],1),i(\"a\",{attrs:{href:\"/test/tpl\",target:\"_blank\"}},[t._v(\"通知模板\")])],1)],1),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.change_noti_dialog=!1}}},[t._v(\" 关闭 \")]),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:t.submit_noti_type}},[t._v(\" 保存 \")])],1)],1)],1),i(\"v-dialog\",{attrs:{persistent:\"\",\"max-width\":\"600px\"},model:{value:t.bind_wechat_dialog,callback:function(e){t.bind_wechat_dialog=e},expression:\"bind_wechat_dialog\"}},[i(\"v-card\",[i(\"v-card-title\",[i(\"span\",{staticClass:\"text-h5\"},[t._v(\"绑定微信\")])]),i(\"v-card-text\",[i(\"v-container\",[i(\"div\",{staticClass:\"text-body-1\"},[t._v(\"微信推送功能借助第三方平台「WxPusher」实现，关注服务号即完成绑定，系统将通过此平台向您推送通知。\")]),i(\"v-img\",{staticClass:\"mx-auto\",attrs:{src:t.wechat_bind_data.qrcode_url,alt:\"获取失败\",\"max-width\":\"200px\"}}),i(\"div\",{staticClass:\"text-caption text-center\"},[t._v(\"请使用微信扫描此处二维码\")])],1)],1),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:t.bind_wechat}},[t._v(\" 关闭 \")])],1)],1)],1),i(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.actQueryDialog,callback:function(e){t.actQueryDialog=e},expression:\"actQueryDialog\"}},[i(\"v-card\",[i(\"v-card-title\",[t._v(t._s(t.actQuery.name))]),i(\"v-card-text\",[i(\"div\",{staticClass:\"text-overline\"},[t._v(\"头图\")]),i(\"v-img\",{attrs:{src:t.actQuery.pic,\"max-height\":\"200px\"}}),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"头图地址\")]),t._v(t._s(t.actQuery.pic)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"活动公告\")]),t._v(t._s(t.actQuery.announcement)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"签到完成提示语\")]),t._v(t._s(t.actQuery.cheer_text)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"活动开始时间\")]),t._v(t._s(t.actQuery.begin_time)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"活动结束时间\")]),t._v(t._s(t.actQuery.end_time)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"创建时间\")]),t._v(t._s(t.actQuery.create_time)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"更新时间\")]),t._v(t._s(t.actQuery.update_time)),i(\"v-divider\"),i(\"div\",{staticClass:\"text-overline\"},[t._v(\"创建人\")]),t._v(t._s(t.actQuery.create_by)),i(\"v-divider\")],1),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.actQueryDialog=!t.actQueryDialog}}},[t._v(\"OK\")])],1)],1)],1),1==t.upload.dialog?i(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.upload.dialog,callback:function(e){t.$set(t.upload,\"dialog\",e)},expression:\"upload.dialog\"}},[i(\"v-card\",[i(\"v-card-title\",{staticClass:\"text-h5\"},[t._v(\"您需要上传文件\")]),i(\"v-card-text\",[t._v(\"请仔细阅读活动公告，上传所需文件。\"),i(\"br\"),t._v(\"请勿上传含有违反中国大陆和香港法律内容的文件。\")]),i(\"v-card-text\",[i(\"v-file-input\",{attrs:{placeholder:\"选择文件\",\"prepend-icon\":\"mdi-file\",label:\"选择文件\"},model:{value:t.upload.file,callback:function(e){t.$set(t.upload,\"file\",e)},expression:\"upload.file\"}})],1),i(\"v-card-text\",[t._v(\" 支持格式：\"+t._s(t.upload.act_item.file_options.allow_ext)+\" \"),i(\"br\"),t._v(\" 文件大小不超过\"+t._s(t.upload.act_item.file_options.max_size)+\" \"),i(\"br\"),t._v(\" 特殊要求：\"+t._s(t.upload.act_item.file_options.note)+\" \"),i(\"br\"),t._v(\" 文件将在服务器保存30天 \")]),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\",disabled:this.upload.loading,right:\"\"},on:{click:function(e){t.upload.dialog=!1}}},[t._v(\"关闭\")]),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\",loading:t.upload.loading,right:\"\"},on:{click:t.upload_signin}},[t._v(\"上传并签到\")])],1)],1)],1):t._e(),1==t.upload_preview.open?i(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.upload_preview.open,callback:function(e){t.$set(t.upload_preview,\"open\",e)},expression:\"upload_preview.open\"}},[i(\"v-card\",[i(\"v-card-title\",{staticClass:\"text-h5\"},[t._v(\"文件预览\")]),\"image\"==t.upload_preview.item.upload.type?i(\"v-card-text\",[i(\"v-img\",{staticClass:\"ma-auto\",attrs:{\"max-width\":\"400\",src:t.upload_preview.item.upload.img_url},scopedSlots:t._u([{key:\"placeholder\",fn:function(){return[i(\"v-row\",{staticClass:\"fill-height ma-0\",attrs:{align:\"center\",justify:\"center\"}},[i(\"v-progress-circular\",{attrs:{indeterminate:\"\",color:\"blue\"}})],1)]},proxy:!0}],null,!1,911053785)})],1):t._e(),\"other\"==t.upload_preview.item.upload.type?i(\"v-card-text\",[i(\"v-btn\",{attrs:{depressed:\"\",href:t.upload_preview.item.upload.download_url,target:\"_blank\"}},[t._v(\"下载\")])],1):t._e(),i(\"v-card-text\",[t._v(\" 文件若上传错误可以点击“撤销签到”并重新上传。 \"),i(\"br\"),t._v(\" 图片/文件下载临时地址有效期为5分钟。 \")]),i(\"v-card-actions\",[i(\"v-spacer\"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\",right:\"\"},on:{click:function(e){t.upload_preview.open=!1}}},[t._v(\"关闭\")])],1)],1)],1):t._e()],1),i(\"v-footer\",{attrs:{app:\"\"}},[i(\"div\",{staticClass:\"text-caption py-3\"},[t._v(t._s(t.version)+\" ©2021 ROY233\"),i(\"br\"),i(\"a\",{staticClass:\"text-decoration-none\",attrs:{href:\"https://github.com/rroy233/signin-helper\",target:\"_blank\"}},[t._v(\"Github\")]),t._v(\" | \"),i(\"a\",{staticClass:\"text-decoration-none\",attrs:{href:\"https://github.com/rroy233/signin-helper/blob/main/CHANGELOG.md\",target:\"_blank\"}},[t._v(\"更新日志\")])])])],1)],1)},I=[],T=\"http://localhost:9093\",P={name:\"UserIndex\",data:function(){return{navi_bar:0,drawer:!1,group:0,badge:!0,dialog:{open:!1,title:\"\",text:\"\"},change_noti_dialog:!1,actQueryDialog:!1,bind_wechat_dialog:!1,sts_dialog:!1,upload_preview:{open:!1,item:null},act_info:{total:0,list:[{act_token:\"\",act_name:\"\",act_announcement:\"\",act_pic:\"\",act_type:0,noti_enabled:0,begin_time:\"\",end_time:\"\",status:1,statistic:{},file_options:{allow_ext:\"\",max_size:\"\",note:\"\"},upload:{enabled:!1,type:\"\",img_url:\"\",download_url:\"\"}}]},sign_btn:{disabled:!0,text:\"签到\"},sts:{done:0,total:0,unfinished_list:[],finished_list:[]},myInfo:{user_id:0,user_name:\"\",email:\"\",class_name:\"\",class_code:\"\",is_admin:0},myActLog:{total:0},log_page:1,noti_type:\"none\",actQuery:{name:\"\",announcement:\"\",cheer_text:\"\",pic:\"\",begin_time:\"\",end_time:\"\",create_time:\"\",update_time:\"\",create_by:\"\"},wechat_bind_data:{timer:!1,qrcode_url:\"\",token:\"\"},version:\"DevEnv\",csrfHeader:{},noti_list:[],upload:{act_item:null,dialog:!1,loading:!1,file:null}}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;if(w.a.start(),null==this.$cookies.get(\"CSRF-TOKEN\"))return this.$router.push({path:\"/error/csrf-token获取失败，请换个浏览器登录\"}),void w.a.done();this.csrfHeader={\"X-CSRF-TOKEN\":this.$cookies.get(\"CSRF-TOKEN\")},this.axios({method:\"get\",url:T+\"/api/user/version\"}).then((function(e){0==e.data.status?t.version=e.data.data.version:t.error(e.data.msg)})).catch((function(e){t.error(e)})),this.axios({method:\"get\",url:T+\"/api/user/act/info\"}).then((function(e){0==e.data.status?(t.act_info=e.data.data,0==e.data.data.status?(t.sign_btn.disabled=!1,t.sign_btn.text=\"签到\"):(t.sign_btn.disabled=!0,t.sign_btn.text=\"已签到\")):t.error(e.data.msg)})).catch((function(e){t.error(e)})),this.axios({method:\"get\",url:T+\"/api/user/profile\"}).then((function(e){0==e.data.status?t.myInfo=e.data.data:t.error(e.data.msg)})).catch((function(e){t.error(e)})),this.axios({method:\"get\",url:T+\"/api/user/act/log\",params:{page:1}}).then((function(e){0==e.data.status?t.myActLog=e.data.data:t.error(e.data.msg)})).catch((function(e){t.error(e)})),this.axios({method:\"get\",url:T+\"/api/user/noti/fetch\"}).then((function(e){0==e.data.status?t.noti_list=e.data.data:t.error(e.data.msg)})).catch((function(e){t.error(e)})),w.a.done()},upload_signin:function(){if(null!=this.upload.act_item){var t=this,e=new FormData;e.append(\"file\",this.upload.file),this.upload.loading=!0,this.axios({method:\"post\",url:T+\"/api/user/act/upload?act_token=\"+t.upload.act_item.act_token,headers:{\"X-CSRF-TOKEN\":t.$cookies.get(\"CSRF-TOKEN\"),\"Content-type\":\"multipart/form-data;charset:utf-8\"},data:e}).then((function(e){if(0!=e.data.status)return t.error(e.data.msg),void(t.upload.loading=!1);var a=e.data.data.upload_token;t.axios({method:\"post\",url:T+\"/api/user/act/signin\",headers:t.csrfHeader,data:{act_token:t.upload.act_item.act_token,upload_token:a}}).then((function(e){t.upload.dialog=!1,t.upload.loading=!1,0==e.data.status?(t.success(e.data.data.text),t.initData()):t.error(e.data.msg)})).catch((function(e){t.error(e)}))})).catch((function(e){t.error(e)}))}else this.error(\"未选择活动\")},cancel:function(t){var e=this;this.axios({method:\"post\",url:T+\"/api/user/act/cancel\",headers:e.csrfHeader,data:{act_token:t.act_token}}).then((function(t){0==t.data.status?(e.success(t.data.msg),e.initData()):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},signin:function(t){if(1==t.act_type)return this.upload.act_item=t,void(this.upload.dialog=!0);var e=this;this.axios({method:\"post\",url:T+\"/api/user/act/signin\",headers:e.csrfHeader,data:{act_token:t.act_token,upload_token:\"\"}}).then((function(t){0==t.data.status?(e.success(t.data.data.text),e.initData()):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},view_upload:function(t){this.upload_preview.item=t,this.upload_preview.open=!0},get_sts:function(t){var e=this;this.axios({method:\"get\",url:T+\"/api/user/act/statistic\",params:{act_token:t.act_token}}).then((function(t){0==t.data.status?(e.sts.done=t.data.data.done,e.sts.total=t.data.data.total,e.sts.unfinished_list=t.data.data.unfinished_list,e.sts.finished_list=t.data.data.finished_list,e.sts_dialog=!0):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},logout:function(){var t=this;this.axios({method:\"post\",url:T+\"/api/logout\",headers:t.csrfHeader}).then((function(e){0==e.data.status?(setTimeout((function(){window.location.href=\"https://account.roy233.com/logout\"}),1e3),t.success(\"即将登出\")):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},change_noti:function(){var t=this;this.axios({method:\"get\",url:T+\"/api/user/noti/get\"}).then((function(e){0==e.data.status?(t.noti_type=e.data.data.noti_type,t.change_noti_dialog=!0):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},submit_noti_type:function(){var t=this;this.axios({method:\"post\",url:T+\"/api/user/noti/edit\",headers:t.csrfHeader,data:{noti_type:t.noti_type}}).then((function(e){0==e.data.status?(t.success(\"修改成功\"),t.change_noti_dialog=!1):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},view_act_info:function(t){var e=this;this.axios({method:\"get\",url:T+\"/api/user/act/query\",params:{act_token:t.act_token}}).then((function(t){0==t.data.status?(e.actQuery=t.data.data,e.actQueryDialog=!0):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},bind_wechat:function(){if(this.wechat_bind_data.timer)return this.bind_wechat_dialog=!1,clearInterval(this.wechat_bind_data.timer),void(this.wechat_bind_data.timer=null);var t=this;this.axios({method:\"get\",url:T+\"/api/user/wechat/qrcode\"}).then((function(e){0==e.data.status?(t.wechat_bind_data.qrcode_url=e.data.data.qrcode_url,t.wechat_bind_data.token=e.data.data.token,t.bind_wechat_dialog=!0,t.wechat_bind_data.timer=setInterval((function(){t.bind_wechat_query()}),3e3)):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},bind_wechat_query:function(){var t=this;this.axios({method:\"get\",url:T+\"/api/user/wechat/bind\",params:{token:t.wechat_bind_data.token}}).then((function(e){0!=e.data.status&&(1==e.data.status?t.success(\"绑定成功\"):-1==e.data.status&&t.error(e.data.msg),t.bind_wechat_dialog=!1,clearInterval(t.wechat_bind_data.timer),t.wechat_bind_data.timer=null)})).catch((function(e){t.error(e)}))},noti_check:function(t){w.a.start();var e=this;this.axios({method:\"post\",url:T+\"/api/user/noti/check\",headers:e.csrfHeader,data:{token:t.token}}).then((function(t){0==t.data.status?e.initData():e.error(t.data.msg)})).catch((function(t){e.error(t)})),w.a.done()},success:function(t){this.dialog.open=!0,this.dialog.title=\"成功\",this.dialog.text=t},error:function(t){this.dialog.open=!0,this.dialog.title=\"失败\",this.dialog.text=t}},watch:{group:function(){w.a.start(),this.drawer=!1,w.a.done()},log_page:function(){var t=this;this.axios({method:\"get\",url:T+\"/api/user/act/log\",params:{page:t.log_page}}).then((function(e){0==e.data.status?t.myActLog=e.data.data:t.error(e.data.msg)})).catch((function(e){t.error(e)}))}}},S=P,O=(a(\"4793\"),a(\"0798\")),j=a(\"40dc\"),A=a(\"5bc1\"),L=a(\"8212\"),E=a(\"8336\"),Q=a(\"b0af\"),H=a(\"99d9\"),R=a(\"cc20\"),N=a(\"62ad\"),F=a(\"a523\"),K=a(\"169a\"),M=a(\"ce7e\"),q=a(\"23a7\"),z=a(\"553a\"),B=a(\"132d\"),U=a(\"adda\"),G=a(\"8860\"),X=a(\"da13\"),J=a(\"1800\"),W=a(\"8270\"),Y=a(\"5d23\"),Z=a(\"1baa\"),tt=a(\"34c3\"),et=a(\"f6c4\"),at=a(\"f774\"),it=a(\"891e\"),nt=a(\"8b9c\"),st=a(\"490a\"),ot=a(\"67b6\"),rt=a(\"43a6\"),ct=a(\"0fd9\"),lt=a(\"2fa4\"),dt=a(\"e0c7\"),_t=a(\"71d9\"),ut=a(\"2a7f\"),vt=Object(m[\"a\"])(S,D,I,!1,null,\"3637683a\",null),mt=vt.exports;f()(vt,{VAlert:O[\"a\"],VApp:h[\"a\"],VAppBar:j[\"a\"],VAppBarNavIcon:A[\"a\"],VAvatar:L[\"a\"],VBtn:E[\"a\"],VCard:Q[\"a\"],VCardActions:H[\"a\"],VCardSubtitle:H[\"b\"],VCardText:H[\"c\"],VCardTitle:H[\"d\"],VChip:R[\"a\"],VCol:N[\"a\"],VContainer:F[\"a\"],VDialog:K[\"a\"],VDivider:M[\"a\"],VFileInput:q[\"a\"],VFooter:z[\"a\"],VIcon:B[\"a\"],VImg:U[\"a\"],VList:G[\"a\"],VListItem:X[\"a\"],VListItemAction:J[\"a\"],VListItemAvatar:W[\"a\"],VListItemContent:Y[\"b\"],VListItemGroup:Z[\"a\"],VListItemIcon:tt[\"a\"],VListItemSubtitle:Y[\"c\"],VListItemTitle:Y[\"d\"],VMain:et[\"a\"],VNavigationDrawer:at[\"a\"],VPagination:it[\"a\"],VParallax:nt[\"a\"],VProgressCircular:st[\"a\"],VRadio:ot[\"a\"],VRadioGroup:rt[\"a\"],VRow:ct[\"a\"],VSpacer:lt[\"a\"],VSubheader:dt[\"a\"],VToolbar:_t[\"a\"],VToolbarTitle:ut[\"b\"]});var pt={name:\"User\",components:{UserIndex:mt}},ft=pt,ht=Object(m[\"a\"])(ft,V,$,!1,null,null,null),gt=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"admin-index\")},xt=[],kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"v-app\",{attrs:{id:\"inspire\"}},[a(\"v-app-bar\",{attrs:{app:\"\"}},[a(\"v-toolbar-title\",[t._v(\"管理员面板\")])],1),a(\"v-main\",[a(\"v-container\",[a(\"v-alert\",{staticClass:\"ma-2\",attrs:{text:\"\",color:\"info\"}},[a(\"h3\",{staticClass:\"text-h5\"},[t._v(\"管理员您好\")]),a(\"div\",[t._v(\"如果遇到什么问题可以联系QQ:2867984618\")]),a(\"div\",[t._v(\"系统现已支持多任务并行，您可以在发布多个签到活动了。\")]),a(\"v-divider\",{staticClass:\"my-4 info\",staticStyle:{opacity:\"0.22\"}}),a(\"div\",{staticClass:\"v-text-body-1\"},[t._v(\" 您当前所管理的班级名称为\"),a(\"code\",[t._v(t._s(t.class_info.class_name))]),t._v(\"。 新同学可以使用班级代码\"),a(\"code\",[t._v(t._s(t.class_info.class_code))]),t._v(\"加入。 \")])],1),a(\"v-list-item-group\",{staticClass:\"ma-2\",attrs:{color:\"primary\"}},[a(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.edit_class}},[a(\"v-list-item-icon\",[a(\"v-icon\",[t._v(\"mdi-google-classroom\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(\"修改班级信息\")])],1)],1),a(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.show_act_list}},[a(\"v-list-item-icon\",[a(\"v-icon\",[t._v(\"mdi-calendar-search\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(\"活动管理\")])],1)],1),a(\"v-list-item\",{attrs:{link:\"\"},on:{click:t.show_user_list}},[a(\"v-list-item-icon\",[a(\"v-icon\",[t._v(\"mdi-account-cog-outline\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(\"班级成员管理\")])],1)],1),a(\"v-divider\"),a(\"v-list-item\",{attrs:{to:\"/user\",link:\"\"}},[a(\"v-list-item-icon\",[a(\"v-icon\",[t._v(\"mdi-keyboard-return\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(\"返回用户端\")])],1)],1)],1)],1),a(\"v-dialog\",{attrs:{\"max-width\":\"450px\"},model:{value:t.dialog.open,callback:function(e){t.$set(t.dialog,\"open\",e)},expression:\"dialog.open\"}},[a(\"v-card\",[a(\"v-card-title\",[t._v(t._s(t.dialog.title))]),a(\"v-card-text\",[t._v(\" \"+t._s(t.dialog.text)+\" \")]),a(\"v-card-actions\",[a(\"v-spacer\"),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.dialog.open=!t.dialog.open}}},[t._v(\"OK\")])],1)],1)],1),a(\"v-dialog\",{attrs:{\"max-width\":\"450px\"},model:{value:t.editClassDialog,callback:function(e){t.editClassDialog=e},expression:\"editClassDialog\"}},[a(\"v-card\",[a(\"v-card-title\",[t._v(\"编辑班级信息\")]),a(\"v-card-text\",[a(\"v-text-field\",{attrs:{label:\"班级名称\",outlined:\"\"},model:{value:t.class_edit.class_name,callback:function(e){t.$set(t.class_edit,\"class_name\",e)},expression:\"class_edit.class_name\"}}),a(\"v-text-field\",{attrs:{label:\"班级代码\",outlined:\"\"},model:{value:t.class_edit.class_code,callback:function(e){t.$set(t.class_edit,\"class_code\",e)},expression:\"class_edit.class_code\"}})],1),a(\"v-card-actions\",[a(\"v-spacer\"),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.editClassDialog=!t.editClassDialog}}},[t._v(\"取消\")]),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:t.save_class}},[t._v(\"保存\")])],1)],1)],1),a(\"v-dialog\",{attrs:{\"hide-overlay\":\"\",persistent:\"\",width:\"300\"},model:{value:t.loading_dialog,callback:function(e){t.loading_dialog=e},expression:\"loading_dialog\"}},[a(\"v-card\",{attrs:{color:\"white\",dark:\"\"}},[a(\"v-card-text\",{staticClass:\"mt-1 primary--text\"},[t._v(\" 加载中 \"),a(\"v-progress-linear\",{staticClass:\"mb-0\",attrs:{indeterminate:\"\",color:\"primary\"}})],1)],1)],1),a(\"v-dialog\",{attrs:{fullscreen:\"\",\"hide-overlay\":\"\",transition:\"dialog-bottom-transition\"},model:{value:t.act_list_dialog,callback:function(e){t.act_list_dialog=e},expression:\"act_list_dialog\"}},[a(\"v-card\",[a(\"v-toolbar\",{attrs:{color:\"cyan\",dark:\"\",flat:\"\"},scopedSlots:t._u([{key:\"extension\",fn:function(){return[a(\"v-tabs\",{attrs:{\"align-with-title\":\"\"},model:{value:t.act_list_tab,callback:function(e){t.act_list_tab=e},expression:\"act_list_tab\"}},[a(\"v-tabs-slider\",{attrs:{color:\"yellow\"}}),a(\"v-tab\",[0!=t.act_list.active_num?a(\"v-badge\",{attrs:{color:\"pink\",dot:\"\"}},[t._v(\" 当前活动 \")]):t._e(),t._v(\" \"+t._s(0==t.act_list.active_num?\"当前活动\":\"\")+\" \")],1),a(\"v-tab\",[t._v(\" 历史活动 \")]),a(\"v-tab\",[0!=t.act_list.waiting_num?a(\"v-badge\",{attrs:{color:\"blue\",dot:\"\"}},[t._v(\" 预约开启活动 \")]):t._e(),t._v(\" \"+t._s(0==t.act_list.waiting_num?\"预约开启活动\":\"\")+\" \")],1),a(\"v-tab-item\",[a(\"v-card\",[a(\"v-container\",[a(\"v-list\",{attrs:{\"three-line\":\"\"}},[t._l(t.act_list.active_list,(function(e,i){return[a(\"v-list-item\",{key:i},[a(\"v-list-item-avatar\",[a(\"v-icon\",[t._v(\"mdi-calendar-cursor\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(t._s(e.name))]),a(\"v-list-item-subtitle\",[t._v(\"创建时间\"+t._s(e.begin_time))]),a(\"v-list-item-subtitle\",[t._v(\"截止时间\"+t._s(e.end_time))])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.edit_act(e)}}},[t._v(\" 编辑 \")])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.get_sts(e)}}},[t._v(\" 数据 \"),1==e.type?a(\"v-icon\",{attrs:{small:\"\",right:\"\"}},[t._v(\"mdi-cloud-check-outline\")]):t._e()],1),a(\"v-list-item-action-text\",{staticClass:\"text-center\"},[t._v(\"创建人:\"+t._s(e.create_by))])],1)],1)]}))],2)],1)],1)],1),a(\"v-tab-item\",[a(\"v-card\",[a(\"v-list\",{attrs:{\"three-line\":\"\"}},[t._l(t.act_list.history_list,(function(e,i){return[a(\"v-list-item\",{key:i},[a(\"v-list-item-avatar\",[a(\"v-icon\",[t._v(\"mdi-calendar-lock\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",{domProps:{innerHTML:t._s(e.name)}}),a(\"v-list-item-subtitle\",[t._v(\"创建时间\"+t._s(e.begin_time))]),a(\"v-list-item-subtitle\",[t._v(\"截止时间\"+t._s(e.end_time))])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.edit_act(e)}}},[t._v(\" 编辑 \")])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.get_sts(e)}}},[t._v(\" 数据 \"),1==e.type?a(\"v-icon\",{attrs:{small:\"\",right:\"\"}},[t._v(\"mdi-cloud-check-outline\")]):t._e()],1),a(\"v-list-item-action-text\",{staticClass:\"text-center\"},[t._v(\"创建人:\"+t._s(e.create_by))])],1)],1)]}))],2)],1)],1),a(\"v-tab-item\",[a(\"v-card\",[a(\"v-container\",[a(\"v-list\",{attrs:{\"three-line\":\"\"}},[t._l(t.act_list.waiting_list,(function(e,i){return[a(\"v-list-item\",{key:i},[a(\"v-list-item-avatar\",[a(\"v-icon\",[t._v(\"mdi-calendar-cursor\")])],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(t._s(e.name))]),a(\"v-list-item-subtitle\",[t._v(\"计划于\"+t._s(e.begin_time)+\"开启\")])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.edit_act(e)}}},[t._v(\" 编辑 \")])],1),a(\"v-list-item-action\",[a(\"v-btn\",{attrs:{depressed:\"\"},on:{click:function(a){return t.get_sts(e)}}},[t._v(\" 数据 \"),1==e.type?a(\"v-icon\",{attrs:{small:\"\",right:\"\"}},[t._v(\"mdi-cloud-check-outline\")]):t._e()],1),a(\"v-list-item-action-text\",{staticClass:\"text-center\"},[t._v(\"创建人:\"+t._s(e.create_by))])],1)],1)]}))],2)],1)],1)],1)],1)]},proxy:!0}])},[a(\"v-btn\",{attrs:{icon:\"\",dark:\"\"},on:{click:function(e){t.act_list_dialog=!1}}},[a(\"v-icon\",[t._v(\"mdi-close\")])],1),a(\"v-toolbar-title\",[t._v(\"活动管理\")]),a(\"v-spacer\"),a(\"v-btn\",{attrs:{depressed:\"\",color:\"cyan darken-2\"},on:{click:t.new_act}},[t._v(\" 新建活动 \")])],1)],1)],1),a(\"v-dialog\",{attrs:{fullscreen:\"\",\"hide-overlay\":\"\",transition:\"dialog-bottom-transition\"},model:{value:t.act_dialog,callback:function(e){t.act_dialog=e},expression:\"act_dialog\"}},[a(\"v-card\",[a(\"v-toolbar\",{attrs:{dark:\"\",color:\"primary\"}},[a(\"v-btn\",{attrs:{icon:\"\",dark:\"\"},on:{click:function(e){t.act_dialog=!1}}},[a(\"v-icon\",[t._v(\"mdi-close\")])],1),a(\"v-toolbar-title\",[t._v(t._s(\"new\"==t.act_edit_mode?\"🌟新建活动\":\"📝编辑当前活动\"))]),a(\"v-spacer\"),a(\"v-toolbar-items\",[a(\"v-btn\",{attrs:{dark:\"\",text:\"\"},on:{click:t.save_act}},[t._v(\" 保存 \")])],1)],1),a(\"v-container\",[\"new\"==t.act_edit_mode?a(\"v-alert\",{staticClass:\"mt-2 mb-4\",attrs:{dense:\"\",type:\"info\",icon:\"mdi-folder-plus-outline\"}},[t._v(\" 请正确填写结束日期，活动状态会在到期后自动变更。 \"),a(\"br\"),t._v(\" 建议管理员为每一个活动都选择不同的配图，便于区分。 \"),a(\"br\"),t._v(\" 保存之后，活动即开始，系统将向班级内每一位同学发送通知。 \")]):t._e(),\"edit\"==t.act_edit_mode?a(\"v-alert\",{staticClass:\"mt-2 mb-4\",attrs:{dense:\"\",color:\"#2A3B4D\",dark:\"\",icon:\"mdi-calendar-edit\"}},[t._v(\" 若您提前关闭此活动，我们将自动为您设置结束时间。 \")]):t._e(),a(\"v-text-field\",{attrs:{label:\"活动名称\",rules:t.name_rule,hint:\"建议不要与过去的重复，可以是:第x周xxxx\",outlined:\"\"},model:{value:t.act_info.name,callback:function(e){t.$set(t.act_info,\"name\",e)},expression:\"act_info.name\"}}),\"edit\"==t.act_edit_mode?a(\"v-switch\",{staticClass:\"my-0\",attrs:{inset:\"\",label:\"是否立即开始活动\"},model:{value:t.act_active,callback:function(e){t.act_active=e},expression:\"act_active\"}}):t._e(),a(\"v-switch\",{staticClass:\"my-0\",attrs:{inset:\"\",label:\"是否预约开启\"},model:{value:t.need_wait,callback:function(e){t.need_wait=e},expression:\"need_wait\"}}),t.need_wait?a(\"v-menu\",{ref:\"begin_date_menu\",attrs:{\"close-on-content-click\":!1,\"return-value\":t.act_info.begin_time.d,transition:\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},on:{\"update:returnValue\":function(e){return t.$set(t.act_info.begin_time,\"d\",e)},\"update:return-value\":function(e){return t.$set(t.act_info.begin_time,\"d\",e)}},scopedSlots:t._u([{key:\"activator\",fn:function(e){var i=e.on,n=e.attrs;return[a(\"v-text-field\",t._g(t._b({attrs:{label:\"选择活动计划开启日期\",\"prepend-icon\":\"mdi-calendar\",readonly:\"\"},model:{value:t.act_info.begin_time.d,callback:function(e){t.$set(t.act_info.begin_time,\"d\",e)},expression:\"act_info.begin_time.d\"}},\"v-text-field\",n,!1),i))]}}],null,!1,3217886873),model:{value:t.date_time_menu.begin_date_menu,callback:function(e){t.$set(t.date_time_menu,\"begin_date_menu\",e)},expression:\"date_time_menu.begin_date_menu\"}},[a(\"v-date-picker\",{attrs:{\"no-title\":\"\",scrollable:\"\"},model:{value:t.act_info.begin_time.d,callback:function(e){t.$set(t.act_info.begin_time,\"d\",e)},expression:\"act_info.begin_time.d\"}},[a(\"v-spacer\"),a(\"v-btn\",{attrs:{text:\"\",color:\"primary\"},on:{click:function(e){t.date_time_menu.begin_date_menu=!1}}},[t._v(\" Cancel \")]),a(\"v-btn\",{attrs:{text:\"\",color:\"primary\"},on:{click:function(e){return t.$refs.begin_date_menu.save(t.act_info.begin_time.d)}}},[t._v(\" OK \")])],1)],1):t._e(),t.need_wait?a(\"v-menu\",{ref:\"begin_time_menu\",attrs:{\"close-on-content-click\":!1,\"nudge-right\":40,\"return-value\":t.act_info.begin_time.t,transition:\"scale-transition\",\"offset-y\":\"\",\"max-width\":\"290px\",\"min-width\":\"290px\"},on:{\"update:returnValue\":function(e){return t.$set(t.act_info.begin_time,\"t\",e)},\"update:return-value\":function(e){return t.$set(t.act_info.begin_time,\"t\",e)}},scopedSlots:t._u([{key:\"activator\",fn:function(e){var i=e.on,n=e.attrs;return[a(\"v-text-field\",t._g(t._b({attrs:{label:\"活动计划开启时间(24小时制)\",\"prepend-icon\":\"mdi-clock-time-four-outline\",readonly:\"\"},model:{value:t.act_info.begin_time.t,callback:function(e){t.$set(t.act_info.begin_time,\"t\",e)},expression:\"act_info.begin_time.t\"}},\"v-text-field\",n,!1),i))]}}],null,!1,2201393877),model:{value:t.date_time_menu.begin_time_menu,callback:function(e){t.$set(t.date_time_menu,\"begin_time_menu\",e)},expression:\"date_time_menu.begin_time_menu\"}},[t.date_time_menu.begin_time_menu?a(\"v-time-picker\",{attrs:{format:\"24hr\",\"full-width\":\"\"},on:{\"click:minute\":function(e){return t.$refs.begin_time_menu.save(t.act_info.begin_time.t)}},model:{value:t.act_info.begin_time.t,callback:function(e){t.$set(t.act_info.begin_time,\"t\",e)},expression:\"act_info.begin_time.t\"}}):t._e()],1):t._e(),a(\"v-switch\",{staticClass:\"my-0\",attrs:{inset:\"\",label:\"是否启用每日提醒\"},model:{value:t.act_info.daily_notify,callback:function(e){t.$set(t.act_info,\"daily_notify\",e)},expression:\"act_info.daily_notify\"}}),a(\"v-textarea\",{attrs:{label:\"活动公告\",rules:t.announcement_rule,outlined:\"\"},model:{value:t.act_info.announcement,callback:function(e){t.$set(t.act_info,\"announcement\",e)},expression:\"act_info.announcement\"}}),a(\"v-text-field\",{attrs:{label:\"完成签到提示语\",rules:t.cheerText_rule,outlined:\"\"},model:{value:t.act_info.cheer_text,callback:function(e){t.$set(t.act_info,\"cheer_text\",e)},expression:\"act_info.cheer_text\"}}),a(\"div\",{staticClass:\"text-overline\"},[t._v(\"头图设置\")]),a(\"div\",{staticClass:\"text-body-1 mb-3\"},[t._v(\" 我们允许您个性化设置签到卡片的背景图片，如果您要使用默认图片的话，下方输入框请 \"),a(\"code\",[t._v(\"留空\")]),t._v(\"。 \"),a(\"br\"),t._v(\" 如果需要自定义图片，请前往\"),a(\"a\",{attrs:{href:\"https://sm.ms\",target:\"_blank\"}},[t._v(\"SM.MS\")]),t._v(\"上传图片，在下方填入图片的地址，保存后将自动转换为加密地址。 \"),a(\"br\"),t._v(' 使用「随机图片」功能系统将从Pixiv随机抓取图片，下方将自动填入\"预览地址\"，保存活动后图片地址将转为加密\"永久地址\"，图片有效期90天。 ')]),a(\"div\",{staticClass:\"d-flex flex-wrap\"},[a(\"v-text-field\",{attrs:{label:\"头图地址\",outlined:\"\"},model:{value:t.act_info.pic,callback:function(e){t.$set(t.act_info,\"pic\",e)},expression:\"act_info.pic\"}}),a(\"v-btn\",{staticClass:\"ma-3\",attrs:{depressed:\"\",large:\"\",loading:t.get_rd_pic_btn_loading},on:{click:t.get_random_pic}},[t._v(\"随机图片\")])],1),a(\"v-container\",[a(\"v-card\",{staticClass:\"mx-auto\",attrs:{\"max-width\":\"450\"}},[a(\"v-img\",{staticClass:\"white--text align-end\",attrs:{height:\"200px\",src:t.img_preview,gradient:\"to top right, rgba(0,0,0,.7), rgba(240,255,255,.3)\"}},[a(\"v-card-title\",{staticClass:\"font-weight-black\"},[t._v(\" \"+t._s(t.act_info.name)+\" \")]),a(\"v-card-subtitle\",{staticClass:\"text-caption\"},[t._v(\" 还有xxx等x名同学未完成 \")])],1),a(\"v-card-subtitle\",{staticClass:\"pb-0\"},[t._v(\" 预览卡片 \")]),a(\"v-card-text\",{staticClass:\"text--primary pt-5\"},[a(\"div\",[t._v(t._s(t.act_info.announcement))])]),a(\"v-card-actions\",[a(\"v-btn\",{attrs:{color:\"orange\",large:\"\",text:\"\"}},[t._v(\" 签到 \"),t.act_info.upload.enabled?a(\"v-icon\",{attrs:{right:\"\",dark:\"\"}},[t._v(\" mdi-cloud-upload \")]):t._e()],1),a(\"v-btn\",{attrs:{color:\"primary\",large:\"\",text:\"\"}},[t._v(\" 完成情况 \")])],1)],1)],1),\"new\"==t.act_edit_mode?a(\"v-card\",{staticClass:\"my-3\"},[a(\"v-card-title\",[t._v(\"文件上传设置\")]),a(\"v-card-subtitle\",[t._v(\" 系统默认会将用户上传的文件名改为用户的姓名，如果需要保留原文件名，请关闭“上传后重新命名”开关。 \"),a(\"br\"),t._v(\" 用户上传的文件将在服务器存储30天，过期删除，请管理员及时导出。 \"),a(\"br\"),t._v(\" 活动一旦发布将无法更改下列设置! \")]),a(\"v-card-text\",[a(\"v-switch\",{attrs:{inset:\"\",label:\"是否需要上传文件\"},model:{value:t.act_info.upload.enabled,callback:function(e){t.$set(t.act_info.upload,\"enabled\",e)},expression:\"act_info.upload.enabled\"}})],1),t.act_info.upload.enabled?a(\"v-card-text\",[a(\"div\",{staticClass:\"text-subtitle-2\"},[t._v(\"文件类型(可多选)：\")]),a(\"v-row\",[a(\"v-col\",{staticClass:\"d-flex justify-start flex-wrap\",attrs:{cols:\"12\"}},[a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"图片文件(png,jpg)\",value:\"image\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}}),a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"压缩包(zip,rar)\",value:\"archive\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}}),a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"Word文档(doc,docx)\",value:\"word\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}}),a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"PowerPoint演示文档(ppt,pptx)\",value:\"ppt\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}}),a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"Excel表格(xls,xlsx)\",value:\"excel\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}}),a(\"v-checkbox\",{staticClass:\"ma-2\",attrs:{label:\"PDF文档(pdf)\",value:\"pdf\"},model:{value:t.act_info.upload.type,callback:function(e){t.$set(t.act_info.upload,\"type\",e)},expression:\"act_info.upload.type\"}})],1)],1),a(\"v-slider\",{attrs:{label:\"单个文件大小不超过(MB)\",\"thumb-color\":\"green lighten-1\",\"thumb-label\":\"always\",max:\"100\",min:\"1\"},model:{value:t.act_info.upload.max_size,callback:function(e){t.$set(t.act_info.upload,\"max_size\",e)},expression:\"act_info.upload.max_size\"}}),a(\"v-switch\",{staticClass:\"my-0\",attrs:{inset:\"\",label:\"上传后重新命名\"},model:{value:t.act_info.upload.rename,callback:function(e){t.$set(t.act_info.upload,\"rename\",e)},expression:\"act_info.upload.rename\"}})],1):t._e()],1):t._e(),\"edit\"==t.act_edit_mode&&1==t.act_info.upload.enabled?a(\"v-card\",{staticClass:\"my-3\"},[a(\"v-card-title\",[t._v(\"文件上传设置浏览\")]),a(\"v-card-text\",[a(\"v-row\",{staticClass:\"d-flex flex-wrap\"},[a(\"v-col\",[a(\"div\",{staticClass:\"text-subtitle-2\"},[t._v(\"文件类型：\")]),t._l(t.act_info.upload.type,(function(e,i){return a(\"v-chip\",{key:i,staticClass:\"ma-2\",attrs:{label:\"\"}},[t._v(t._s(e))])}))],2),a(\"v-col\",[a(\"div\",{staticClass:\"text-subtitle-2\"},[t._v(\"大小限制：\")]),a(\"v-chip\",{staticClass:\"ma-2\",attrs:{label:\"\"}},[t._v(t._s(t.act_info.upload.max_size)+\" MB\")])],1),a(\"v-col\",[a(\"div\",{staticClass:\"text-subtitle-2\"},[t._v(\"上传后是否重新命名：\")]),a(\"v-chip\",{staticClass:\"ma-2\",attrs:{label:\"\"}},[t._v(t._s(t.act_info.upload.rename))])],1)],1)],1)],1):t._e(),a(\"v-menu\",{ref:\"end_date_menu\",attrs:{\"close-on-content-click\":!1,\"return-value\":t.act_info.end_time.d,transition:\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},on:{\"update:returnValue\":function(e){return t.$set(t.act_info.end_time,\"d\",e)},\"update:return-value\":function(e){return t.$set(t.act_info.end_time,\"d\",e)}},scopedSlots:t._u([{key:\"activator\",fn:function(e){var i=e.on,n=e.attrs;return[a(\"v-text-field\",t._g(t._b({attrs:{label:\"选择活动结束日期\",\"prepend-icon\":\"mdi-calendar\",readonly:\"\"},model:{value:t.act_info.end_time.d,callback:function(e){t.$set(t.act_info.end_time,\"d\",e)},expression:\"act_info.end_time.d\"}},\"v-text-field\",n,!1),i))]}}]),model:{value:t.date_time_menu.end_date_menu,callback:function(e){t.$set(t.date_time_menu,\"end_date_menu\",e)},expression:\"date_time_menu.end_date_menu\"}},[a(\"v-date-picker\",{attrs:{\"no-title\":\"\",scrollable:\"\"},model:{value:t.act_info.end_time.d,callback:function(e){t.$set(t.act_info.end_time,\"d\",e)},expression:\"act_info.end_time.d\"}},[a(\"v-spacer\"),a(\"v-btn\",{attrs:{text:\"\",color:\"primary\"},on:{click:function(e){t.date_time_menu.end_date_menu=!1}}},[t._v(\" Cancel \")]),a(\"v-btn\",{attrs:{text:\"\",color:\"primary\"},on:{click:function(e){return t.$refs.end_date_menu.save(t.act_info.end_time.d)}}},[t._v(\" OK \")])],1)],1),a(\"v-menu\",{ref:\"end_time_menu\",attrs:{\"close-on-content-click\":!1,\"nudge-right\":40,\"return-value\":t.act_info.end_time.t,transition:\"scale-transition\",\"offset-y\":\"\",\"max-width\":\"290px\",\"min-width\":\"290px\"},on:{\"update:returnValue\":function(e){return t.$set(t.act_info.end_time,\"t\",e)},\"update:return-value\":function(e){return t.$set(t.act_info.end_time,\"t\",e)}},scopedSlots:t._u([{key:\"activator\",fn:function(e){var i=e.on,n=e.attrs;return[a(\"v-text-field\",t._g(t._b({attrs:{label:\"活动结束时间(24小时制)\",\"prepend-icon\":\"mdi-clock-time-four-outline\",readonly:\"\"},model:{value:t.act_info.end_time.t,callback:function(e){t.$set(t.act_info.end_time,\"t\",e)},expression:\"act_info.end_time.t\"}},\"v-text-field\",n,!1),i))]}}]),model:{value:t.date_time_menu.end_time_menu,callback:function(e){t.$set(t.date_time_menu,\"end_time_menu\",e)},expression:\"date_time_menu.end_time_menu\"}},[t.date_time_menu.end_time_menu?a(\"v-time-picker\",{attrs:{format:\"24hr\",\"full-width\":\"\"},on:{\"click:minute\":function(e){return t.$refs.end_time_menu.save(t.act_info.end_time.t)}},model:{value:t.act_info.end_time.t,callback:function(e){t.$set(t.act_info.end_time,\"t\",e)},expression:\"act_info.end_time.t\"}}):t._e()],1),a(\"small\",[t._v(\"完成编辑后记得点击右上角的“保存”按钮\")])],1)],1)],1),a(\"v-dialog\",{attrs:{fullscreen:\"\",\"hide-overlay\":\"\",transition:\"dialog-bottom-transition\"},model:{value:t.sts_dialog,callback:function(e){t.sts_dialog=e},expression:\"sts_dialog\"}},[a(\"v-card\",[a(\"v-toolbar\",{attrs:{dark:\"\",color:\"info\"}},[a(\"v-btn\",{attrs:{icon:\"\",dark:\"\"},on:{click:function(e){t.sts_dialog=!1}}},[a(\"v-icon\",[t._v(\"mdi-close\")])],1),a(\"v-toolbar-title\",[t._v(\"活动统计数据\")]),a(\"v-spacer\")],1),a(\"div\",{staticClass:\"pa-4\"},[a(\"div\",{staticClass:\"text-caption\"},[t._v(\"数据统计刷新存在0~10s延迟。\")]),0!=t.export_data.act_id?a(\"div\",{staticClass:\"text-caption\"},[t._v(\" 当前活动已开启文件上传功能。\"),a(\"br\"),t._v(\"点击“已完成”用户列表项可查看用户上传的文件。\"),a(\"br\"),t._v(\"点击“导出所有文件”可将用户上传的文件打包下载。 \")]):t._e()]),a(\"v-card\",{staticClass:\"ma-2\"},[0!=t.export_data.act_id?a(\"v-card-text\",[\"\"==t.export_data.url?a(\"v-btn\",{staticClass:\"ma-3\",attrs:{depressed:\"\",loading:t.export_data.loading},on:{click:t.export_file}},[t._v(\" 导出所有文件 \")]):t._e(),\"\"!=t.export_data.url?a(\"v-btn\",{staticClass:\"ma-3\",attrs:{depressed:\"\",color:\"primary\",target:\"_blank\",href:t.export_data.url}},[t._v(\" 下载 \")]):t._e(),\"\"!=t.export_data.url?a(\"small\",[t._v(\"下载链接有效期为5分钟。\")]):t._e()],1):t._e(),a(\"v-list\",{staticClass:\"pa-2\",attrs:{dense:\"\"}},[a(\"v-subheader\",[t._v(\"未完成\")]),a(\"v-list-item-group\",{attrs:{color:\"primary\"}},t._l(t.sts.unfinished_list,(function(e,i){return a(\"v-list-item\",{key:i},[a(\"v-list-item-icon\",[a(\"v-icon\",{domProps:{textContent:t._s(e.id)}})],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(t._s(e.user_name)+\" (UID:\"+t._s(e.user_id)+\")\")])],1)],1)})),1),a(\"v-divider\"),a(\"v-subheader\",[t._v(\"已完成\")]),0==t.export_data.act_id?a(\"v-list-item-group\",{attrs:{color:\"primary\"}},t._l(t.sts.finished_list,(function(e,i){return a(\"v-list-item\",{key:i},[a(\"v-list-item-icon\",[a(\"v-icon\",{domProps:{textContent:t._s(e.id)}})],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(t._s(e.user_name)+\" (UID:\"+t._s(e.user_id)+\")\")]),a(\"v-list-item-subtitle\",[t._v(\"完成时间:\"+t._s(e.date_time))])],1)],1)})),1):t._e(),0!=t.export_data.act_id?a(\"v-list-item-group\",{attrs:{color:\"primary\"}},t._l(t.sts.finished_list,(function(e,i){return a(\"v-list-item\",{key:i,on:{click:function(a){return t.get_file_preview(e)}}},[a(\"v-list-item-icon\",[a(\"v-icon\",{domProps:{textContent:t._s(e.id)}})],1),a(\"v-list-item-content\",[a(\"v-list-item-title\",[t._v(t._s(e.user_name)+\" (UID:\"+t._s(e.user_id)+\")\")]),a(\"v-list-item-subtitle\",[t._v(\"完成时间:\"+t._s(e.date_time)+\" \"),a(\"v-icon\",{attrs:{small:\"\"}},[t._v(\"mdi-cloud-check-outline\")])],1)],1)],1)})),1):t._e()],1)],1)],1)],1),a(\"v-dialog\",{attrs:{fullscreen:\"\",\"hide-overlay\":\"\",transition:\"dialog-bottom-transition\"},model:{value:t.user_dialog,callback:function(e){t.user_dialog=e},expression:\"user_dialog\"}},[a(\"v-card\",{staticClass:\"pa-4\"},[a(\"v-toolbar\",{attrs:{dark:\"\",color:\"info\"}},[a(\"v-btn\",{attrs:{icon:\"\",dark:\"\"},on:{click:function(e){t.user_dialog=!1}}},[a(\"v-icon\",[t._v(\"mdi-close\")])],1),a(\"v-toolbar-title\",[t._v(\"班级成员管理\")]),a(\"v-spacer\"),a(\"v-btn\",{attrs:{dark:\"\",icon:\"\"},on:{click:t.get_user_list}},[a(\"v-icon\",[t._v(\"mdi-refresh\")])],1)],1),a(\"v-card-text\",[a(\"v-alert\",{staticClass:\"mx-auto ma-4\",attrs:{shaped:\"\",type:\"info\"}},[t._v(\" 【踢出班级】:点击按钮后，将立即清除用户的签到记录及上传的文件，记录无法恢复。用户将重新回到“初始化”阶段。谨慎操作！\"),a(\"br\"),t._v(\" 【设为/撤销管理员】: 操作成功后该用户需要重新登录才能生效。 \")]),a(\"v-card\",{staticClass:\"mx-auto ma-4\"},[a(\"v-card-title\",[t._v(\" 所有班级成员 \"),a(\"v-spacer\"),a(\"v-text-field\",{attrs:{\"append-icon\":\"mdi-magnify\",label:\"搜索\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:t.userlist_search,callback:function(e){t.userlist_search=e},expression:\"userlist_search\"}})],1),a(\"v-card-text\",[a(\"v-data-table\",{attrs:{headers:t.userlist_headers,items:t.user_list,search:t.userlist_search},scopedSlots:t._u([{key:\"item.is_admin\",fn:function(e){var i=e.item;return[1==i.admin?a(\"v-icon\",{attrs:{color:\"purple\"}},[t._v(\"mdi-check-circle-outline\")]):t._e(),0==i.admin?a(\"v-icon\",[t._v(\"mdi-close-circle-outline\")]):t._e()]}},{key:\"item.actions\",fn:function(e){var i=e.item;return[0==i.admin?a(\"v-btn\",{staticClass:\"ma-2\",attrs:{depressed:\"\",small:\"\",color:\"primary\"},on:{click:function(e){return t.set_admin(i,1)}}},[t._v(\"设为管理员\")]):t._e(),1==i.admin?a(\"v-btn\",{staticClass:\"ma-2\",attrs:{depressed:\"\",small:\"\"},on:{click:function(e){return t.set_admin(i,0)}}},[t._v(\"撤销管理员\")]):t._e(),a(\"v-btn\",{staticClass:\"ma-2\",attrs:{depressed:\"\",small:\"\",color:\"error\"},on:{click:function(e){return t.confirn_delete(i)}}},[t._v(\"踢出班级\")])]}}],null,!0)})],1)],1)],1)],1)],1),a(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.dialogDelete.open,callback:function(e){t.$set(t.dialogDelete,\"open\",e)},expression:\"dialogDelete.open\"}},[a(\"v-card\",[a(\"v-card-title\",{staticClass:\"text-h5\"},[t._v(\"确定要删除该用户?\")]),a(\"v-card-actions\",[a(\"v-spacer\"),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:function(e){t.dialogDelete.open=!1}}},[t._v(\"取消\")]),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\"},on:{click:t.op_user}},[t._v(\"OK\")])],1)],1)],1),1==t.upload_preview.open?a(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.upload_preview.open,callback:function(e){t.$set(t.upload_preview,\"open\",e)},expression:\"upload_preview.open\"}},[a(\"v-card\",[a(\"v-card-title\",{staticClass:\"text-h5\"},[t._v(\"用户文件预览\")]),\"image\"==t.upload_preview.item.type?a(\"v-card-text\",[a(\"v-img\",{staticClass:\"ma-auto\",attrs:{\"max-width\":\"400\",src:t.upload_preview.item.img_url},scopedSlots:t._u([{key:\"placeholder\",fn:function(){return[a(\"v-row\",{staticClass:\"fill-height ma-0\",attrs:{align:\"center\",justify:\"center\"}},[a(\"v-progress-circular\",{attrs:{indeterminate:\"\",color:\"blue\"}})],1)]},proxy:!0}],null,!1,911053785)})],1):t._e(),\"other\"==t.upload_preview.item.type?a(\"v-card-text\",[a(\"v-btn\",{attrs:{depressed:\"\",href:t.upload_preview.item.download_url,target:\"_blank\"}},[t._v(\"下载\")])],1):t._e(),a(\"v-card-text\",[t._v(\" 图片/文件下载临时地址有效期为5分钟。 \")]),a(\"v-card-actions\",[a(\"v-spacer\"),a(\"v-btn\",{attrs:{color:\"blue darken-1\",text:\"\",right:\"\"},on:{click:function(e){t.upload_preview.open=!1}}},[t._v(\"关闭\")])],1)],1)],1):t._e()],1)],1)],1)},yt=[],wt=(a(\"b0c0\"),\"http://localhost:9093\"),Ct={name:\"AdminIndex\",data:function(){return{announcement_rule:[function(t){return t.length<=50||\"字数不能超过50\"}],name_rule:[function(t){return t.length<=40||\"字数不能超过40\"}],cheerText_rule:[function(t){return t.length<=20||\"字数不能超过20\"}],dialog:{open:!1,title:\"\",text:\"\"},act_list:{active_num:0,active_list:[],history_list:[],waiting_list:[],waiting_num:0},class_info:{class_name:\"\",class_code:\"\",total:0,act_id:\"\",act_name:\"\"},class_edit:{class_name:\"\",class_code:\"\"},act_dialog:!1,editClassDialog:!1,act_list_dialog:!1,loading_dialog:!1,sts_dialog:!1,user_dialog:!1,editUserDialog:!1,dialogDelete:{item:null,open:!1},act_list_tab:0,act_info:{name:\"\",active:!1,daily_notify:!0,pic:\"\",announcement:\"\",cheer_text:\"\",need_wait:!1,begin_time:{d:\"\",t:\"\"},end_time:{d:\"\",t:\"\"},upload:{enabled:!1,type:[],max_size:5,rename:!0}},need_wait:!1,act_active:!1,sts:{done:0,total:0,unfinished_list:[],finished_list:[]},act_edit_mode:\"edit\",date_time_menu:{begin_date_menu:!1,begin_time_menu:!1,end_date_menu:!1,end_time_menu:!1},csrfHeader:{},user_list:[],userlist_search:\"\",userlist_headers:[{text:\"序号\",align:\"start\",value:\"id\"},{text:\"姓名\",value:\"name\"},{text:\"邮箱\",value:\"email\"},{text:\"通知方式\",value:\"noti_type\"},{text:\"是否为管理员\",value:\"is_admin\",sortable:!1},{text:\"操作\",value:\"actions\",sortable:!1}],export_data:{act_id:0,loading:!1,url:\"\"},upload_preview:{open:!1,item:null},get_rd_pic_btn_loading:!1}},mounted:function(){null!=this.$cookies.get(\"CSRF-TOKEN\")?(this.csrfHeader={\"X-CSRF-TOKEN\":this.$cookies.get(\"CSRF-TOKEN\")},this.initClass()):this.$router.push({path:\"/error/csrf-token获取失败，请换个浏览器登录\"})},methods:{initClass:function(){var t=this;this.axios({method:\"get\",url:wt+\"/api/admin/class/info\"}).then((function(e){0==e.data.status?t.class_info=e.data.data:t.error(e.data.msg)})).catch((function(e){t.error(e)}))},get_random_pic:function(){var t=this;this.get_rd_pic_btn_loading=!0,this.axios({method:\"get\",url:wt+\"/api/admin/act/getRandomPic\"}).then((function(e){0==e.data.status?t.act_info.pic=e.data.data.url:t.error(e.data.msg),t.get_rd_pic_btn_loading=!1})).catch((function(e){t.error(e),t.get_rd_pic_btn_loading=!1}))},edit_act:function(t){var e=this;this.axios({method:\"get\",url:wt+\"/api/admin/act/info\",params:{act_id:t.act_id}}).then((function(t){0==t.data.status?(e.act_info=t.data.data,e.act_active=e.act_info.active,e.need_wait=e.act_info.need_wait,e.act_dialog=!0,e.act_edit_mode=\"edit\",console.log(e.act_info)):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},new_act:function(){this.act_info.name=\"\",this.act_info.active=!0,this.act_info.daily_notify=!0,this.act_info.announcement=\"\",this.act_info.pic=\"\",this.act_info.cheer_text=\"恭喜完成\",this.act_info.begin_time.d=this.today_date,this.act_info.begin_time.t=\"00:00\",this.act_info.end_time.d=this.today_date,this.act_info.end_time.t=\"00:00\",this.act_info.upload.enabled=!1,this.act_info.upload.max_size=5,this.act_info.upload.rename=!0,this.act_info.upload.type=[],this.act_dialog=!0,this.act_edit_mode=\"new\",this.get_random_pic()},edit_class:function(){this.editClassDialog=!0,this.class_edit.class_name=this.class_info.class_name,this.class_edit.class_code=this.class_info.class_code},show_act_list:function(){var t=this;this.loading_dialog=!0,this.axios({method:\"get\",url:wt+\"/api/admin/act/list\"}).then((function(e){0==e.data.status?(t.act_list=e.data.data,t.loading_dialog=!1):t.error(e.data.msg)})).catch((function(e){t.error(e)})),t.act_list_dialog=!0},save_class:function(){var t=this;this.axios({method:\"post\",url:wt+\"/api/admin/class/edit\",headers:t.csrfHeader,data:t.class_edit}).then((function(e){0==e.data.status?(t.success(\"保存成功\"),t.editClassDialog=!1,t.initClass()):t.error(e.data.msg)})).catch((function(e){t.error(e)}))},save_act:function(){w.a.start();var t=\"\",e=this;\"new\"==this.act_edit_mode?t=\"/api/admin/act/new\":\"edit\"==this.act_edit_mode&&(t=\"/api/admin/act/edit\"),this.axios({method:\"post\",url:wt+t,headers:e.csrfHeader,data:e.act_info}).then((function(t){0==t.data.status?(e.success(\"保存成功\"),e.act_dialog=!1,e.show_act_list()):e.error(t.data.msg),w.a.done()})).catch((function(t){e.error(t),w.a.done()}))},get_sts:function(t){var e=this;this.axios({method:\"get\",url:wt+\"/api/admin/act/statistic\",params:{act_id:t.act_id}}).then((function(a){0==a.data.status?(e.sts.done=a.data.data.done,e.sts.total=a.data.data.total,e.sts.unfinished_list=a.data.data.unfinished_list,e.sts.finished_list=a.data.data.finished_list,1==t.type?e.export_data.act_id=t.act_id:e.export_data.act_id=0,e.export_data.url=\"\",e.sts_dialog=!0):e.error(a.data.msg)})).catch((function(t){e.error(t)}))},show_user_list:function(){var t=this;w.a.start(),this.axios({method:\"get\",url:wt+\"/api/admin/user/list\"}).then((function(e){0==e.data.status?(t.user_list=e.data.data.data,t.user_dialog=!0):t.error(e.data.msg),w.a.done()})).catch((function(e){t.error(e)}))},get_user_list:function(){var t=this;w.a.start(),this.axios({method:\"get\",url:wt+\"/api/admin/user/list\"}).then((function(e){0==e.data.status?t.user_list=e.data.data.data:t.error(e.data.msg),w.a.done()})).catch((function(e){t.error(e)}))},op_user:function(){var t=this;this.axios({method:\"post\",url:wt+\"/api/admin/user/del\",headers:t.csrfHeader,data:{user_id:t.dialogDelete.item.user_id,sign:t.dialogDelete.item.sign}}).then((function(e){0==e.data.status?t.success(\"操作成功\"):t.error(e.data.msg),t.dialogDelete.open=!1})).catch((function(e){t.error(e)}))},set_admin:function(t,e){var a=this;this.axios({method:\"post\",url:wt+\"/api/admin/user/setAdmin\",headers:a.csrfHeader,data:{user_id:t.user_id,set_to:e,sign:t.sign}}).then((function(t){0==t.data.status?(a.success(\"操作成功\"),a.get_user_list()):a.error(t.data.msg),a.dialogDelete.open=!1})).catch((function(t){a.error(t)}))},confirn_delete:function(t){this.dialogDelete.item=t,this.dialogDelete.open=!0},export_file:function(){var t=this;this.export_data.loading=!0,this.axios({method:\"post\",url:wt+\"/api/admin/act/export\",headers:t.csrfHeader,data:{act_id:t.export_data.act_id}}).then((function(e){0==e.data.status?t.export_data.url=e.data.data.download_url:t.error(e.data.msg),t.export_data.loading=!1})).catch((function(e){t.error(e)}))},get_file_preview:function(t){var e=this;this.axios({method:\"post\",url:wt+\"/api/admin/act/viewFile\",headers:e.csrfHeader,data:{act_id:e.export_data.act_id,user_id:t.user_id}}).then((function(t){0==t.data.status?(e.upload_preview.item=t.data.data,e.upload_preview.open=!0):e.error(t.data.msg)})).catch((function(t){e.error(t)}))},success:function(t){this.dialog.open=!0,this.dialog.title=\"成功\",this.dialog.text=t},error:function(t){this.dialog.open=!0,this.dialog.title=\"失败\",this.dialog.text=t}},computed:{img_preview:function(){return\"\"==this.act_info.pic?\"/static/image/default.jpg\":this.act_info.pic},today_date:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a<10&&(a=\"0\"+a),i<10&&(i=\"0\"+i),e+\"-\"+a+\"-\"+i}},watch:{need_wait:function(t){this.act_info.need_wait=t,this.act_active=1!=t},act_active:function(t){this.act_info.active=t,this.need_wait=!t}}},Vt=Ct,$t=a(\"4ca6\"),Dt=a(\"ac7c\"),It=a(\"8fea\"),Tt=a(\"2e4b\"),Pt=a(\"e449\"),St=a(\"8e36\"),Ot=a(\"ba0d\"),jt=a(\"b73d\"),At=a(\"71a3\"),Lt=a(\"c671\"),Et=a(\"fe57\"),Qt=a(\"9a96\"),Ht=a(\"8654\"),Rt=a(\"a844\"),Nt=a(\"c964\"),Ft=Object(m[\"a\"])(Vt,kt,yt,!1,null,null,null),Kt=Ft.exports;f()(Ft,{VAlert:O[\"a\"],VApp:h[\"a\"],VAppBar:j[\"a\"],VBadge:$t[\"a\"],VBtn:E[\"a\"],VCard:Q[\"a\"],VCardActions:H[\"a\"],VCardSubtitle:H[\"b\"],VCardText:H[\"c\"],VCardTitle:H[\"d\"],VCheckbox:Dt[\"a\"],VChip:R[\"a\"],VCol:N[\"a\"],VContainer:F[\"a\"],VDataTable:It[\"a\"],VDatePicker:Tt[\"a\"],VDialog:K[\"a\"],VDivider:M[\"a\"],VIcon:B[\"a\"],VImg:U[\"a\"],VList:G[\"a\"],VListItem:X[\"a\"],VListItemAction:J[\"a\"],VListItemActionText:Y[\"a\"],VListItemAvatar:W[\"a\"],VListItemContent:Y[\"b\"],VListItemGroup:Z[\"a\"],VListItemIcon:tt[\"a\"],VListItemSubtitle:Y[\"c\"],VListItemTitle:Y[\"d\"],VMain:et[\"a\"],VMenu:Pt[\"a\"],VProgressCircular:st[\"a\"],VProgressLinear:St[\"a\"],VRow:ct[\"a\"],VSlider:Ot[\"a\"],VSpacer:lt[\"a\"],VSubheader:dt[\"a\"],VSwitch:jt[\"a\"],VTab:At[\"a\"],VTabItem:Lt[\"a\"],VTabs:Et[\"a\"],VTabsSlider:Qt[\"a\"],VTextField:Ht[\"a\"],VTextarea:Rt[\"a\"],VTimePicker:Nt[\"a\"],VToolbar:_t[\"a\"],VToolbarItems:ut[\"a\"],VToolbarTitle:ut[\"b\"]});var Mt={name:\"Admin\",components:{AdminIndex:Kt}},qt=Mt,zt=Object(m[\"a\"])(qt,bt,xt,!1,null,null,null),Bt=zt.exports,Ut=a(\"3fb9\");i[\"a\"].use(C[\"a\"]);var Gt=[{path:\"/\",redirect:\"/user\"},{path:\"/user\",component:gt,meta:{title:\"用户 | 签到系统\"}},{path:\"/admin\",component:Bt,meta:{title:\"管理员 | 签到系统\"}},{path:\"/error/:info\",component:Ut[\"default\"],meta:{title:\"错误 | 签到系统\"}}],Xt=new C[\"a\"]({routes:Gt}),Jt=Xt,Wt=a(\"2b27\"),Yt=a.n(Wt);i[\"a\"].use(Yt.a),i[\"a\"].config.productionTip=!1,w.a.configure({ease:\"ease\",speed:500}),Jt.beforeEach((function(t,e,a){w.a.start(),a()})),Jt.afterEach((function(){w.a.done()})),new i[\"a\"]({router:Jt,store:k,vuetify:l,render:function(t){return t(b)}}).$mount(\"#app\")},\"6e21\":function(t,e,a){\"use strict\";a(\"ba4c\")},add7:function(t,e,a){t.exports=a.p+\"img/girls_cry.c10b87ef.jpg\"},b3b7:function(t,e,a){t.exports=a.p+\"img/jean_kokomi_ganyu.d2ba4a98.jpg\"},ba4c:function(t,e,a){},ea16:function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return i})),a.d(e,\"b\",(function(){return n}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"div\",{staticClass:\"mt-12\",attrs:{justify:\"center\",align:\"center\"}},[i(\"div\",[i(\"div\",{staticClass:\"errorheader mb-12\"},[t._v(\"ERROR\")]),i(\"div\",{staticClass:\"text-subtitle-1 my-6\"},[i(\"div\",{staticClass:\"grey--text\"},[t._v(\"错误信息\")]),t._v(t._s(t.$route.params.info))])]),i(\"v-btn\",{attrs:{rounded:\"\",outlined:\"\",color:\"rgba(249, 128, 128, 0.6)\",dark:\"\",href:\"/\"}},[t._v(\"返回主页\")]),i(\"div\",{staticClass:\"justify-end\"},[i(\"v-img\",{attrs:{src:a(\"add7\")}})],1)],1)])},n=[]},fa37:function(t,e,a){\"use strict\";var i=a(\"36f8\"),n=a.n(i);e[\"default\"]=n.a},fd7d:function(t,e,a){}});","extractedComments":[]}